var vn=Object.defineProperty;var Sn=(E,c,l)=>c in E?vn(E,c,{enumerable:!0,configurable:!0,writable:!0,value:l}):E[c]=l;var Y=(E,c,l)=>(Sn(E,typeof c!="symbol"?c+"":c,l),l);class An{constructor(){Y(this,"_map");this._map=new Map}set(c,l){let m=this._map.get(c);m||(m=[],this._map.set(c,m)),m.push(l)}get(c){return this._map.get(c)||[]}has(c){return this._map.has(c)}delete(c,l){const m=this._map.get(c);m&&m.includes(l)&&this._map.set(c,m.filter(b=>l!==b))}deleteAll(c){this._map.delete(c)}hasValue(c,l){const m=this._map.get(c);return m?m.includes(l):!1}get size(){return this._map.size}[Symbol.iterator](){return this._map[Symbol.iterator]()}keys(){return this._map.keys()}values(){const c=[];for(const l of this.keys())c.push(...this.get(l));return c}clear(){this._map.clear()}}class Rn{constructor(c,l,m){Y(this,"_snapshots");Y(this,"_index");Y(this,"snapshotName");Y(this,"_resources");Y(this,"_snapshot");Y(this,"_callId");this._resources=c,this._snapshots=l,this._index=m,this._snapshot=l[m],this._callId=l[m].callId,this.snapshotName=l[m].snapshotName}snapshot(){return this._snapshots[this._index]}viewport(){return this._snapshots[this._index].viewport}render(){const c=(I,j,L)=>{if(typeof I=="string"){const M=Un(I);return L==="STYLE"||L==="style"?Fn(M):M}if(!I._string)if(Array.isArray(I[0])){const M=j-I[0][0];if(M>=0&&M<=j){const B=Cn(this._snapshots[M]),D=I[0][1];D>=0&&D<B.length&&(I._string=c(B[D],M,L))}}else if(typeof I[0]=="string"){const M=[];M.push("<",I[0]);const B=I[0]==="IFRAME"||I[0]==="FRAME",D=I[0]==="A";for(const[q,K]of Object.entries(I[1]||{})){const Q=B&&q.toLowerCase()==="src"?"__playwright_src__":q;let st=K;(q.toLowerCase()==="href"||q.toLowerCase()==="src")&&(D?st="link://"+K:st=Kt(K)),M.push(" ",Q,'="',En(st),'"')}M.push(">");for(let q=2;q<I.length;q++)M.push(c(I[q],j,I[0]));Tn.has(I[0])||M.push("</",I[0],">"),I._string=M.join("")}else I._string="";return I._string},l=this._snapshot;let m=c(l.html,this._index,void 0);return m?(m=(l.doctype?`<!DOCTYPE ${l.doctype}>`:"")+["<style>*,*::before,*::after { visibility: hidden }</style>",`<style>*[__playwright_target__="${this.snapshotName}"] { outline: 2px solid #006ab1 !important; background-color: #6fa8dc7f !important; }</style>`,`<style>*[__playwright_target__="${this._callId}"] { outline: 2px solid #006ab1 !important; background-color: #6fa8dc7f !important; }</style>`,`<script>${In()}<\/script>`].join("")+m,{html:m,pageId:l.pageId,frameId:l.frameId,index:this._index}):{html:"",pageId:l.pageId,frameId:l.frameId,index:this._index}}resourceByUrl(c){const l=this._snapshot;let m;for(const b of this._resources){if(typeof b._monotonicTime=="number"&&b._monotonicTime>=l.timestamp)break;if(b._frameref===l.frameId&&b.request.url===c){m=b;break}}if(!m)for(const b of this._resources){if(typeof b._monotonicTime=="number"&&b._monotonicTime>=l.timestamp)break;if(b.request.url===c)return b}if(m){for(const b of l.resourceOverrides)if(c===b.url&&b.sha1){m={...m,response:{...m.response,content:{...m.response.content,_sha1:b.sha1}}};break}}return m}}const Tn=new Set(["AREA","BASE","BR","COL","COMMAND","EMBED","HR","IMG","INPUT","KEYGEN","LINK","MENUITEM","META","PARAM","SOURCE","TRACK","WBR"]),Je={"&":"&amp;","<":"&lt;",">":"&gt;",'"':"&quot;","'":"&#39;"};function En(E){return E.replace(/[&<>"']/ug,c=>Je[c])}function Un(E){return E.replace(/[&<]/ug,c=>Je[c])}function Cn(E){if(!E._nodes){const c=[],l=m=>{if(typeof m=="string")c.push(m);else if(typeof m[0]=="string"){for(let b=2;b<m.length;b++)l(m[b]);c.push(m)}};l(E.html),E._nodes=c}return E._nodes}function In(){function E(c){const l=[],m=[],b=L=>{for(const M of L.querySelectorAll("[__playwright_scroll_top_]"))l.push(M);for(const M of L.querySelectorAll("[__playwright_scroll_left_]"))m.push(M);for(const M of L.querySelectorAll("[__playwright_value_]"))M.value=M.getAttribute("__playwright_value_"),M.removeAttribute("__playwright_value_");for(const M of L.querySelectorAll("[__playwright_checked_]"))M.checked=M.getAttribute("__playwright_checked_")==="true",M.removeAttribute("__playwright_checked_");for(const M of L.querySelectorAll("[__playwright_selected_]"))M.selected=M.getAttribute("__playwright_selected_")==="true",M.removeAttribute("__playwright_selected_");for(const M of L.querySelectorAll("iframe, frame")){const B=M.getAttribute("__playwright_src__");if(!B)M.setAttribute("src",'data:text/html,<body style="background: #ddd"></body>');else{const D=new URL(c(window.location.href));D.searchParams.delete("pointX"),D.searchParams.delete("pointY");const q=D.pathname.lastIndexOf("/snapshot/");q!==-1&&(D.pathname=D.pathname.substring(0,q+1)),D.pathname+=B.substring(1),M.setAttribute("src",D.toString())}}{const M=L.querySelector("body[__playwright_custom_elements__]");if(M&&window.customElements){const B=(M.getAttribute("__playwright_custom_elements__")||"").split(",");for(const D of B)window.customElements.define(D,class extends HTMLElement{})}}for(const M of L.querySelectorAll("template[__playwright_shadow_root_]")){const B=M,D=B.parentElement.attachShadow({mode:"open"});D.appendChild(B.content),B.remove(),b(D)}if("adoptedStyleSheets"in L){const M=[...L.adoptedStyleSheets];for(const B of L.querySelectorAll("template[__playwright_style_sheet_]")){const D=B,q=new CSSStyleSheet;q.replaceSync(D.getAttribute("__playwright_style_sheet_")),M.push(q)}L.adoptedStyleSheets=M}},I=()=>{window.removeEventListener("load",I);for(const D of l)D.scrollTop=+D.getAttribute("__playwright_scroll_top_"),D.removeAttribute("__playwright_scroll_top_");for(const D of m)D.scrollLeft=+D.getAttribute("__playwright_scroll_left_"),D.removeAttribute("__playwright_scroll_left_");const L=new URL(window.location.href).searchParams,M=L.get("pointX"),B=L.get("pointY");if(M){const D=document.createElement("x-pw-pointer");D.style.position="fixed",D.style.backgroundColor="#f44336",D.style.width="20px",D.style.height="20px",D.style.borderRadius="10px",D.style.margin="-10px 0 0 -10px",D.style.zIndex="2147483647",D.style.left=M+"px",D.style.top=B+"px",document.documentElement.appendChild(D)}document.styleSheets[0].disabled=!0},j=()=>b(document);window.addEventListener("load",I),window.addEventListener("DOMContentLoaded",j)}return`
(${E.toString()})(${Zt.toString()})`}const Xe=["about:","blob:","data:","file:","ftp:","http:","https:","mailto:","sftp:","ws:","wss:"],Ye="http://playwright.bloburl/#";function Kt(E){E.startsWith(Ye)&&(E=E.substring(Ye.length));try{const c=new URL(E);if(c.protocol==="javascript:"||c.protocol==="vbscript:")return"javascript:void(0)";if(!(c.protocol==="blob:")&&Xe.includes(c.protocol))return E;const m="pw-"+c.protocol.slice(0,c.protocol.length-1);return c.protocol="https:",c.hostname=c.hostname?`${m}--${c.hostname}`:m,c.toString()}catch{return E}}const zn=/url\(['"]?([\w-]+:)\/\//ig;function Fn(E){return E.replace(zn,(c,l)=>!(l==="blob:")&&Xe.includes(l)?c:c.replace(l+"//",`https://pw-${l.slice(0,-1)}--`))}function Zt(E){const c=new URL(E);return c.pathname.endsWith("/popout.html")?c.searchParams.get("r"):E}class Mn{constructor(c,l){Y(this,"_snapshotStorage");Y(this,"_resourceLoader");Y(this,"_snapshotIds",new Map);this._snapshotStorage=c,this._resourceLoader=l}serveSnapshot(c,l,m){const b=this._snapshot(c.substring(9),l);if(!b)return new Response(null,{status:404});const I=b.render();return this._snapshotIds.set(m,b),new Response(I.html,{status:200,headers:{"Content-Type":"text/html"}})}serveSnapshotInfo(c,l){const m=this._snapshot(c.substring(13),l);return this._respondWithJson(m?{viewport:m.viewport(),url:m.snapshot().frameUrl}:{error:"No snapshot found"})}_snapshot(c,l){const m=l.get("name");return this._snapshotStorage.snapshotByName(c.slice(1),m)}_respondWithJson(c){return new Response(JSON.stringify(c),{status:200,headers:{"Cache-Control":"public, max-age=31536000","Content-Type":"application/json"}})}async serveResource(c,l){let m;const b=this._snapshotIds.get(l);for(const K of c)if(m=b==null?void 0:b.resourceByUrl(Dn(K)),m)break;if(!m)return new Response(null,{status:404});const I=m.response.content._sha1,j=I?await this._resourceLoader(I)||new Blob([]):new Blob([]);let L=m.response.content.mimeType;/^text\/|^application\/(javascript|json)/.test(L)&&!L.includes("charset")&&(L=`${L}; charset=utf-8`);const B=new Headers;B.set("Content-Type",L);for(const{name:K,value:Q}of m.response.headers)B.set(K,Q);B.delete("Content-Encoding"),B.delete("Access-Control-Allow-Origin"),B.set("Access-Control-Allow-Origin","*"),B.delete("Content-Length"),B.set("Content-Length",String(j.size)),B.set("Cache-Control","public, max-age=31536000");const{status:D}=m.response,q=D===101||D===204||D===205||D===304;return new Response(q?null:j,{headers:B,status:m.response.status,statusText:m.response.statusText})}}function Dn(E){try{const c=new URL(E);return c.hash="",c.toString()}catch{return E}}function Ln(E){const c=new Map,{files:l,stacks:m}=E;for(const b of m){const[I,j]=b;c.set(`call@${I}`,j.map(L=>({file:l[L[0]],line:L[1],column:L[2],function:L[3]})))}return c}var On=typeof globalThis<"u"?globalThis:typeof window<"u"?window:typeof global<"u"?global:typeof self<"u"?self:{};function Nn(E){return E&&E.__esModule&&Object.prototype.hasOwnProperty.call(E,"default")?E.default:E}var Ct={},Wn={get exports(){return Ct},set exports(E){Ct=E}};(function(E,c){(function(l,m){m(c)})(On,function(l){const j=[0,1,3,7,15,31,63,127,255,511,1023,2047,4095,8191,16383,32767,65535],L=[96,7,256,0,8,80,0,8,16,84,8,115,82,7,31,0,8,112,0,8,48,0,9,192,80,7,10,0,8,96,0,8,32,0,9,160,0,8,0,0,8,128,0,8,64,0,9,224,80,7,6,0,8,88,0,8,24,0,9,144,83,7,59,0,8,120,0,8,56,0,9,208,81,7,17,0,8,104,0,8,40,0,9,176,0,8,8,0,8,136,0,8,72,0,9,240,80,7,4,0,8,84,0,8,20,85,8,227,83,7,43,0,8,116,0,8,52,0,9,200,81,7,13,0,8,100,0,8,36,0,9,168,0,8,4,0,8,132,0,8,68,0,9,232,80,7,8,0,8,92,0,8,28,0,9,152,84,7,83,0,8,124,0,8,60,0,9,216,82,7,23,0,8,108,0,8,44,0,9,184,0,8,12,0,8,140,0,8,76,0,9,248,80,7,3,0,8,82,0,8,18,85,8,163,83,7,35,0,8,114,0,8,50,0,9,196,81,7,11,0,8,98,0,8,34,0,9,164,0,8,2,0,8,130,0,8,66,0,9,228,80,7,7,0,8,90,0,8,26,0,9,148,84,7,67,0,8,122,0,8,58,0,9,212,82,7,19,0,8,106,0,8,42,0,9,180,0,8,10,0,8,138,0,8,74,0,9,244,80,7,5,0,8,86,0,8,22,192,8,0,83,7,51,0,8,118,0,8,54,0,9,204,81,7,15,0,8,102,0,8,38,0,9,172,0,8,6,0,8,134,0,8,70,0,9,236,80,7,9,0,8,94,0,8,30,0,9,156,84,7,99,0,8,126,0,8,62,0,9,220,82,7,27,0,8,110,0,8,46,0,9,188,0,8,14,0,8,142,0,8,78,0,9,252,96,7,256,0,8,81,0,8,17,85,8,131,82,7,31,0,8,113,0,8,49,0,9,194,80,7,10,0,8,97,0,8,33,0,9,162,0,8,1,0,8,129,0,8,65,0,9,226,80,7,6,0,8,89,0,8,25,0,9,146,83,7,59,0,8,121,0,8,57,0,9,210,81,7,17,0,8,105,0,8,41,0,9,178,0,8,9,0,8,137,0,8,73,0,9,242,80,7,4,0,8,85,0,8,21,80,8,258,83,7,43,0,8,117,0,8,53,0,9,202,81,7,13,0,8,101,0,8,37,0,9,170,0,8,5,0,8,133,0,8,69,0,9,234,80,7,8,0,8,93,0,8,29,0,9,154,84,7,83,0,8,125,0,8,61,0,9,218,82,7,23,0,8,109,0,8,45,0,9,186,0,8,13,0,8,141,0,8,77,0,9,250,80,7,3,0,8,83,0,8,19,85,8,195,83,7,35,0,8,115,0,8,51,0,9,198,81,7,11,0,8,99,0,8,35,0,9,166,0,8,3,0,8,131,0,8,67,0,9,230,80,7,7,0,8,91,0,8,27,0,9,150,84,7,67,0,8,123,0,8,59,0,9,214,82,7,19,0,8,107,0,8,43,0,9,182,0,8,11,0,8,139,0,8,75,0,9,246,80,7,5,0,8,87,0,8,23,192,8,0,83,7,51,0,8,119,0,8,55,0,9,206,81,7,15,0,8,103,0,8,39,0,9,174,0,8,7,0,8,135,0,8,71,0,9,238,80,7,9,0,8,95,0,8,31,0,9,158,84,7,99,0,8,127,0,8,63,0,9,222,82,7,27,0,8,111,0,8,47,0,9,190,0,8,15,0,8,143,0,8,79,0,9,254,96,7,256,0,8,80,0,8,16,84,8,115,82,7,31,0,8,112,0,8,48,0,9,193,80,7,10,0,8,96,0,8,32,0,9,161,0,8,0,0,8,128,0,8,64,0,9,225,80,7,6,0,8,88,0,8,24,0,9,145,83,7,59,0,8,120,0,8,56,0,9,209,81,7,17,0,8,104,0,8,40,0,9,177,0,8,8,0,8,136,0,8,72,0,9,241,80,7,4,0,8,84,0,8,20,85,8,227,83,7,43,0,8,116,0,8,52,0,9,201,81,7,13,0,8,100,0,8,36,0,9,169,0,8,4,0,8,132,0,8,68,0,9,233,80,7,8,0,8,92,0,8,28,0,9,153,84,7,83,0,8,124,0,8,60,0,9,217,82,7,23,0,8,108,0,8,44,0,9,185,0,8,12,0,8,140,0,8,76,0,9,249,80,7,3,0,8,82,0,8,18,85,8,163,83,7,35,0,8,114,0,8,50,0,9,197,81,7,11,0,8,98,0,8,34,0,9,165,0,8,2,0,8,130,0,8,66,0,9,229,80,7,7,0,8,90,0,8,26,0,9,149,84,7,67,0,8,122,0,8,58,0,9,213,82,7,19,0,8,106,0,8,42,0,9,181,0,8,10,0,8,138,0,8,74,0,9,245,80,7,5,0,8,86,0,8,22,192,8,0,83,7,51,0,8,118,0,8,54,0,9,205,81,7,15,0,8,102,0,8,38,0,9,173,0,8,6,0,8,134,0,8,70,0,9,237,80,7,9,0,8,94,0,8,30,0,9,157,84,7,99,0,8,126,0,8,62,0,9,221,82,7,27,0,8,110,0,8,46,0,9,189,0,8,14,0,8,142,0,8,78,0,9,253,96,7,256,0,8,81,0,8,17,85,8,131,82,7,31,0,8,113,0,8,49,0,9,195,80,7,10,0,8,97,0,8,33,0,9,163,0,8,1,0,8,129,0,8,65,0,9,227,80,7,6,0,8,89,0,8,25,0,9,147,83,7,59,0,8,121,0,8,57,0,9,211,81,7,17,0,8,105,0,8,41,0,9,179,0,8,9,0,8,137,0,8,73,0,9,243,80,7,4,0,8,85,0,8,21,80,8,258,83,7,43,0,8,117,0,8,53,0,9,203,81,7,13,0,8,101,0,8,37,0,9,171,0,8,5,0,8,133,0,8,69,0,9,235,80,7,8,0,8,93,0,8,29,0,9,155,84,7,83,0,8,125,0,8,61,0,9,219,82,7,23,0,8,109,0,8,45,0,9,187,0,8,13,0,8,141,0,8,77,0,9,251,80,7,3,0,8,83,0,8,19,85,8,195,83,7,35,0,8,115,0,8,51,0,9,199,81,7,11,0,8,99,0,8,35,0,9,167,0,8,3,0,8,131,0,8,67,0,9,231,80,7,7,0,8,91,0,8,27,0,9,151,84,7,67,0,8,123,0,8,59,0,9,215,82,7,19,0,8,107,0,8,43,0,9,183,0,8,11,0,8,139,0,8,75,0,9,247,80,7,5,0,8,87,0,8,23,192,8,0,83,7,51,0,8,119,0,8,55,0,9,207,81,7,15,0,8,103,0,8,39,0,9,175,0,8,7,0,8,135,0,8,71,0,9,239,80,7,9,0,8,95,0,8,31,0,9,159,84,7,99,0,8,127,0,8,63,0,9,223,82,7,27,0,8,111,0,8,47,0,9,191,0,8,15,0,8,143,0,8,79,0,9,255],M=[80,5,1,87,5,257,83,5,17,91,5,4097,81,5,5,89,5,1025,85,5,65,93,5,16385,80,5,3,88,5,513,84,5,33,92,5,8193,82,5,9,90,5,2049,86,5,129,192,5,24577,80,5,2,87,5,385,83,5,25,91,5,6145,81,5,7,89,5,1537,85,5,97,93,5,24577,80,5,4,88,5,769,84,5,49,92,5,12289,82,5,13,90,5,3073,86,5,193,192,5,24577],B=[3,4,5,6,7,8,9,10,11,13,15,17,19,23,27,31,35,43,51,59,67,83,99,115,131,163,195,227,258,0,0],D=[0,0,0,0,0,0,0,0,1,1,1,1,2,2,2,2,3,3,3,3,4,4,4,4,5,5,5,5,0,112,112],q=[1,2,3,4,5,7,9,13,17,25,33,49,65,97,129,193,257,385,513,769,1025,1537,2049,3073,4097,6145,8193,12289,16385,24577],K=[0,0,0,0,1,1,2,2,3,3,4,4,5,5,6,6,7,7,8,8,9,9,10,10,11,11,12,12,13,13],Q=15;function st(){let n,e,t,r,a,d;function u(x,g,S,C,P,N,s,p,i,o,h){let w,A,v,y,f,k,z,U,T,R,F,W,$,O,V;R=0,f=S;do t[x[g+R]]++,R++,f--;while(f!==0);if(t[0]==S)return s[0]=-1,p[0]=0,0;for(U=p[0],k=1;k<=Q&&t[k]===0;k++);for(z=k,U<k&&(U=k),f=Q;f!==0&&t[f]===0;f--);for(v=f,U>f&&(U=f),p[0]=U,O=1<<k;k<f;k++,O<<=1)if((O-=t[k])<0)return-3;if((O-=t[f])<0)return-3;for(t[f]+=O,d[1]=k=0,R=1,$=2;--f!=0;)d[$]=k+=t[R],$++,R++;f=0,R=0;do(k=x[g+R])!==0&&(h[d[k]++]=f),R++;while(++f<S);for(S=d[v],d[0]=f=0,R=0,y=-1,W=-U,a[0]=0,F=0,V=0;z<=v;z++)for(w=t[z];w--!=0;){for(;z>W+U;){if(y++,W+=U,V=v-W,V=V>U?U:V,(A=1<<(k=z-W))>w+1&&(A-=w+1,$=z,k<V))for(;++k<V&&!((A<<=1)<=t[++$]);)A-=t[$];if(V=1<<k,o[0]+V>1440)return-3;a[y]=F=o[0],o[0]+=V,y!==0?(d[y]=f,r[0]=k,r[1]=U,k=f>>>W-U,r[2]=F-a[y-1]-k,i.set(r,3*(a[y-1]+k))):s[0]=F}for(r[1]=z-W,R>=S?r[0]=192:h[R]<C?(r[0]=h[R]<256?0:96,r[2]=h[R++]):(r[0]=N[h[R]-C]+16+64,r[2]=P[h[R++]-C]),A=1<<z-W,k=f>>>W;k<V;k+=A)i.set(r,3*(F+k));for(k=1<<z-1;f&k;k>>>=1)f^=k;for(f^=k,T=(1<<W)-1;(f&T)!=d[y];)y--,W-=U,T=(1<<W)-1}return O!==0&&v!=1?-5:0}function _(x){let g;for(n||(n=[],e=[],t=new Int32Array(16),r=[],a=new Int32Array(Q),d=new Int32Array(16)),e.length<x&&(e=[]),g=0;g<x;g++)e[g]=0;for(g=0;g<16;g++)t[g]=0;for(g=0;g<3;g++)r[g]=0;a.set(t.subarray(0,Q),0),d.set(t.subarray(0,16),0)}this.inflate_trees_bits=function(x,g,S,C,P){let N;return _(19),n[0]=0,N=u(x,0,19,19,null,null,S,g,C,n,e),N==-3?P.msg="oversubscribed dynamic bit lengths tree":N!=-5&&g[0]!==0||(P.msg="incomplete dynamic bit lengths tree",N=-3),N},this.inflate_trees_dynamic=function(x,g,S,C,P,N,s,p,i){let o;return _(288),n[0]=0,o=u(S,0,x,257,B,D,N,C,p,n,e),o!=0||C[0]===0?(o==-3?i.msg="oversubscribed literal/length tree":o!=-4&&(i.msg="incomplete literal/length tree",o=-3),o):(_(288),o=u(S,x,g,0,q,K,s,P,p,n,e),o!=0||P[0]===0&&x>257?(o==-3?i.msg="oversubscribed distance tree":o==-5?(i.msg="incomplete distance tree",o=-3):o!=-4&&(i.msg="empty distance tree with lengths",o=-3),o):0)}}st.inflate_trees_fixed=function(n,e,t,r){return n[0]=9,e[0]=5,t[0]=L,r[0]=M,0};function St(){const n=this;let e,t,r,a,d=0,u=0,_=0,x=0,g=0,S=0,C=0,P=0,N=0,s=0;function p(i,o,h,w,A,v,y,f){let k,z,U,T,R,F,W,$,O,V,ut,ht,H,mt,G,Z;W=f.next_in_index,$=f.avail_in,R=y.bitb,F=y.bitk,O=y.write,V=O<y.read?y.read-O-1:y.end-O,ut=j[i],ht=j[o];do{for(;F<20;)$--,R|=(255&f.read_byte(W++))<<F,F+=8;if(k=R&ut,z=h,U=w,Z=3*(U+k),(T=z[Z])!==0)for(;;){if(R>>=z[Z+1],F-=z[Z+1],(16&T)!=0){for(T&=15,H=z[Z+2]+(R&j[T]),R>>=T,F-=T;F<15;)$--,R|=(255&f.read_byte(W++))<<F,F+=8;for(k=R&ht,z=A,U=v,Z=3*(U+k),T=z[Z];;){if(R>>=z[Z+1],F-=z[Z+1],(16&T)!=0){for(T&=15;F<T;)$--,R|=(255&f.read_byte(W++))<<F,F+=8;if(mt=z[Z+2]+(R&j[T]),R>>=T,F-=T,V-=H,O>=mt)G=O-mt,O-G>0&&2>O-G?(y.window[O++]=y.window[G++],y.window[O++]=y.window[G++],H-=2):(y.window.set(y.window.subarray(G,G+2),O),O+=2,G+=2,H-=2);else{G=O-mt;do G+=y.end;while(G<0);if(T=y.end-G,H>T){if(H-=T,O-G>0&&T>O-G)do y.window[O++]=y.window[G++];while(--T!=0);else y.window.set(y.window.subarray(G,G+T),O),O+=T,G+=T,T=0;G=0}}if(O-G>0&&H>O-G)do y.window[O++]=y.window[G++];while(--H!=0);else y.window.set(y.window.subarray(G,G+H),O),O+=H,G+=H,H=0;break}if(64&T)return f.msg="invalid distance code",H=f.avail_in-$,H=F>>3<H?F>>3:H,$+=H,W-=H,F-=H<<3,y.bitb=R,y.bitk=F,f.avail_in=$,f.total_in+=W-f.next_in_index,f.next_in_index=W,y.write=O,-3;k+=z[Z+2],k+=R&j[T],Z=3*(U+k),T=z[Z]}break}if(64&T)return 32&T?(H=f.avail_in-$,H=F>>3<H?F>>3:H,$+=H,W-=H,F-=H<<3,y.bitb=R,y.bitk=F,f.avail_in=$,f.total_in+=W-f.next_in_index,f.next_in_index=W,y.write=O,1):(f.msg="invalid literal/length code",H=f.avail_in-$,H=F>>3<H?F>>3:H,$+=H,W-=H,F-=H<<3,y.bitb=R,y.bitk=F,f.avail_in=$,f.total_in+=W-f.next_in_index,f.next_in_index=W,y.write=O,-3);if(k+=z[Z+2],k+=R&j[T],Z=3*(U+k),(T=z[Z])===0){R>>=z[Z+1],F-=z[Z+1],y.window[O++]=z[Z+2],V--;break}}else R>>=z[Z+1],F-=z[Z+1],y.window[O++]=z[Z+2],V--}while(V>=258&&$>=10);return H=f.avail_in-$,H=F>>3<H?F>>3:H,$+=H,W-=H,F-=H<<3,y.bitb=R,y.bitk=F,f.avail_in=$,f.total_in+=W-f.next_in_index,f.next_in_index=W,y.write=O,0}n.init=function(i,o,h,w,A,v){e=0,C=i,P=o,r=h,N=w,a=A,s=v,t=null},n.proc=function(i,o,h){let w,A,v,y,f,k,z,U=0,T=0,R=0;for(R=o.next_in_index,y=o.avail_in,U=i.bitb,T=i.bitk,f=i.write,k=f<i.read?i.read-f-1:i.end-f;;)switch(e){case 0:if(k>=258&&y>=10&&(i.bitb=U,i.bitk=T,o.avail_in=y,o.total_in+=R-o.next_in_index,o.next_in_index=R,i.write=f,h=p(C,P,r,N,a,s,i,o),R=o.next_in_index,y=o.avail_in,U=i.bitb,T=i.bitk,f=i.write,k=f<i.read?i.read-f-1:i.end-f,h!=0)){e=h==1?7:9;break}_=C,t=r,u=N,e=1;case 1:for(w=_;T<w;){if(y===0)return i.bitb=U,i.bitk=T,o.avail_in=y,o.total_in+=R-o.next_in_index,o.next_in_index=R,i.write=f,i.inflate_flush(o,h);h=0,y--,U|=(255&o.read_byte(R++))<<T,T+=8}if(A=3*(u+(U&j[w])),U>>>=t[A+1],T-=t[A+1],v=t[A],v===0){x=t[A+2],e=6;break}if(16&v){g=15&v,d=t[A+2],e=2;break}if(!(64&v)){_=v,u=A/3+t[A+2];break}if(32&v){e=7;break}return e=9,o.msg="invalid literal/length code",h=-3,i.bitb=U,i.bitk=T,o.avail_in=y,o.total_in+=R-o.next_in_index,o.next_in_index=R,i.write=f,i.inflate_flush(o,h);case 2:for(w=g;T<w;){if(y===0)return i.bitb=U,i.bitk=T,o.avail_in=y,o.total_in+=R-o.next_in_index,o.next_in_index=R,i.write=f,i.inflate_flush(o,h);h=0,y--,U|=(255&o.read_byte(R++))<<T,T+=8}d+=U&j[w],U>>=w,T-=w,_=P,t=a,u=s,e=3;case 3:for(w=_;T<w;){if(y===0)return i.bitb=U,i.bitk=T,o.avail_in=y,o.total_in+=R-o.next_in_index,o.next_in_index=R,i.write=f,i.inflate_flush(o,h);h=0,y--,U|=(255&o.read_byte(R++))<<T,T+=8}if(A=3*(u+(U&j[w])),U>>=t[A+1],T-=t[A+1],v=t[A],(16&v)!=0){g=15&v,S=t[A+2],e=4;break}if(!(64&v)){_=v,u=A/3+t[A+2];break}return e=9,o.msg="invalid distance code",h=-3,i.bitb=U,i.bitk=T,o.avail_in=y,o.total_in+=R-o.next_in_index,o.next_in_index=R,i.write=f,i.inflate_flush(o,h);case 4:for(w=g;T<w;){if(y===0)return i.bitb=U,i.bitk=T,o.avail_in=y,o.total_in+=R-o.next_in_index,o.next_in_index=R,i.write=f,i.inflate_flush(o,h);h=0,y--,U|=(255&o.read_byte(R++))<<T,T+=8}S+=U&j[w],U>>=w,T-=w,e=5;case 5:for(z=f-S;z<0;)z+=i.end;for(;d!==0;){if(k===0&&(f==i.end&&i.read!==0&&(f=0,k=f<i.read?i.read-f-1:i.end-f),k===0&&(i.write=f,h=i.inflate_flush(o,h),f=i.write,k=f<i.read?i.read-f-1:i.end-f,f==i.end&&i.read!==0&&(f=0,k=f<i.read?i.read-f-1:i.end-f),k===0)))return i.bitb=U,i.bitk=T,o.avail_in=y,o.total_in+=R-o.next_in_index,o.next_in_index=R,i.write=f,i.inflate_flush(o,h);i.window[f++]=i.window[z++],k--,z==i.end&&(z=0),d--}e=0;break;case 6:if(k===0&&(f==i.end&&i.read!==0&&(f=0,k=f<i.read?i.read-f-1:i.end-f),k===0&&(i.write=f,h=i.inflate_flush(o,h),f=i.write,k=f<i.read?i.read-f-1:i.end-f,f==i.end&&i.read!==0&&(f=0,k=f<i.read?i.read-f-1:i.end-f),k===0)))return i.bitb=U,i.bitk=T,o.avail_in=y,o.total_in+=R-o.next_in_index,o.next_in_index=R,i.write=f,i.inflate_flush(o,h);h=0,i.window[f++]=x,k--,e=0;break;case 7:if(T>7&&(T-=8,y++,R--),i.write=f,h=i.inflate_flush(o,h),f=i.write,k=f<i.read?i.read-f-1:i.end-f,i.read!=i.write)return i.bitb=U,i.bitk=T,o.avail_in=y,o.total_in+=R-o.next_in_index,o.next_in_index=R,i.write=f,i.inflate_flush(o,h);e=8;case 8:return h=1,i.bitb=U,i.bitk=T,o.avail_in=y,o.total_in+=R-o.next_in_index,o.next_in_index=R,i.write=f,i.inflate_flush(o,h);case 9:return h=-3,i.bitb=U,i.bitk=T,o.avail_in=y,o.total_in+=R-o.next_in_index,o.next_in_index=R,i.write=f,i.inflate_flush(o,h);default:return h=-2,i.bitb=U,i.bitk=T,o.avail_in=y,o.total_in+=R-o.next_in_index,o.next_in_index=R,i.write=f,i.inflate_flush(o,h)}},n.free=function(){}}const tt=[16,17,18,0,8,7,9,6,10,5,11,4,12,3,13,2,14,1,15];function ft(n,e){const t=this;let r,a=0,d=0,u=0,_=0;const x=[0],g=[0],S=new St;let C=0,P=new Int32Array(4320);const N=new st;t.bitk=0,t.bitb=0,t.window=new Uint8Array(e),t.end=e,t.read=0,t.write=0,t.reset=function(s,p){p&&(p[0]=0),a==6&&S.free(s),a=0,t.bitk=0,t.bitb=0,t.read=t.write=0},t.reset(n,null),t.inflate_flush=function(s,p){let i,o,h;return o=s.next_out_index,h=t.read,i=(h<=t.write?t.write:t.end)-h,i>s.avail_out&&(i=s.avail_out),i!==0&&p==-5&&(p=0),s.avail_out-=i,s.total_out+=i,s.next_out.set(t.window.subarray(h,h+i),o),o+=i,h+=i,h==t.end&&(h=0,t.write==t.end&&(t.write=0),i=t.write-h,i>s.avail_out&&(i=s.avail_out),i!==0&&p==-5&&(p=0),s.avail_out-=i,s.total_out+=i,s.next_out.set(t.window.subarray(h,h+i),o),o+=i,h+=i),s.next_out_index=o,t.read=h,p},t.proc=function(s,p){let i,o,h,w,A,v,y,f;for(w=s.next_in_index,A=s.avail_in,o=t.bitb,h=t.bitk,v=t.write,y=v<t.read?t.read-v-1:t.end-v;;){let k,z,U,T,R,F,W,$;switch(a){case 0:for(;h<3;){if(A===0)return t.bitb=o,t.bitk=h,s.avail_in=A,s.total_in+=w-s.next_in_index,s.next_in_index=w,t.write=v,t.inflate_flush(s,p);p=0,A--,o|=(255&s.read_byte(w++))<<h,h+=8}switch(i=7&o,C=1&i,i>>>1){case 0:o>>>=3,h-=3,i=7&h,o>>>=i,h-=i,a=1;break;case 1:k=[],z=[],U=[[]],T=[[]],st.inflate_trees_fixed(k,z,U,T),S.init(k[0],z[0],U[0],0,T[0],0),o>>>=3,h-=3,a=6;break;case 2:o>>>=3,h-=3,a=3;break;case 3:return o>>>=3,h-=3,a=9,s.msg="invalid block type",p=-3,t.bitb=o,t.bitk=h,s.avail_in=A,s.total_in+=w-s.next_in_index,s.next_in_index=w,t.write=v,t.inflate_flush(s,p)}break;case 1:for(;h<32;){if(A===0)return t.bitb=o,t.bitk=h,s.avail_in=A,s.total_in+=w-s.next_in_index,s.next_in_index=w,t.write=v,t.inflate_flush(s,p);p=0,A--,o|=(255&s.read_byte(w++))<<h,h+=8}if((~o>>>16&65535)!=(65535&o))return a=9,s.msg="invalid stored block lengths",p=-3,t.bitb=o,t.bitk=h,s.avail_in=A,s.total_in+=w-s.next_in_index,s.next_in_index=w,t.write=v,t.inflate_flush(s,p);d=65535&o,o=h=0,a=d!==0?2:C!==0?7:0;break;case 2:if(A===0||y===0&&(v==t.end&&t.read!==0&&(v=0,y=v<t.read?t.read-v-1:t.end-v),y===0&&(t.write=v,p=t.inflate_flush(s,p),v=t.write,y=v<t.read?t.read-v-1:t.end-v,v==t.end&&t.read!==0&&(v=0,y=v<t.read?t.read-v-1:t.end-v),y===0)))return t.bitb=o,t.bitk=h,s.avail_in=A,s.total_in+=w-s.next_in_index,s.next_in_index=w,t.write=v,t.inflate_flush(s,p);if(p=0,i=d,i>A&&(i=A),i>y&&(i=y),t.window.set(s.read_buf(w,i),v),w+=i,A-=i,v+=i,y-=i,(d-=i)!=0)break;a=C!==0?7:0;break;case 3:for(;h<14;){if(A===0)return t.bitb=o,t.bitk=h,s.avail_in=A,s.total_in+=w-s.next_in_index,s.next_in_index=w,t.write=v,t.inflate_flush(s,p);p=0,A--,o|=(255&s.read_byte(w++))<<h,h+=8}if(u=i=16383&o,(31&i)>29||(i>>5&31)>29)return a=9,s.msg="too many length or distance symbols",p=-3,t.bitb=o,t.bitk=h,s.avail_in=A,s.total_in+=w-s.next_in_index,s.next_in_index=w,t.write=v,t.inflate_flush(s,p);if(i=258+(31&i)+(i>>5&31),!r||r.length<i)r=[];else for(f=0;f<i;f++)r[f]=0;o>>>=14,h-=14,_=0,a=4;case 4:for(;_<4+(u>>>10);){for(;h<3;){if(A===0)return t.bitb=o,t.bitk=h,s.avail_in=A,s.total_in+=w-s.next_in_index,s.next_in_index=w,t.write=v,t.inflate_flush(s,p);p=0,A--,o|=(255&s.read_byte(w++))<<h,h+=8}r[tt[_++]]=7&o,o>>>=3,h-=3}for(;_<19;)r[tt[_++]]=0;if(x[0]=7,i=N.inflate_trees_bits(r,x,g,P,s),i!=0)return(p=i)==-3&&(r=null,a=9),t.bitb=o,t.bitk=h,s.avail_in=A,s.total_in+=w-s.next_in_index,s.next_in_index=w,t.write=v,t.inflate_flush(s,p);_=0,a=5;case 5:for(;i=u,!(_>=258+(31&i)+(i>>5&31));){let O,V;for(i=x[0];h<i;){if(A===0)return t.bitb=o,t.bitk=h,s.avail_in=A,s.total_in+=w-s.next_in_index,s.next_in_index=w,t.write=v,t.inflate_flush(s,p);p=0,A--,o|=(255&s.read_byte(w++))<<h,h+=8}if(i=P[3*(g[0]+(o&j[i]))+1],V=P[3*(g[0]+(o&j[i]))+2],V<16)o>>>=i,h-=i,r[_++]=V;else{for(f=V==18?7:V-14,O=V==18?11:3;h<i+f;){if(A===0)return t.bitb=o,t.bitk=h,s.avail_in=A,s.total_in+=w-s.next_in_index,s.next_in_index=w,t.write=v,t.inflate_flush(s,p);p=0,A--,o|=(255&s.read_byte(w++))<<h,h+=8}if(o>>>=i,h-=i,O+=o&j[f],o>>>=f,h-=f,f=_,i=u,f+O>258+(31&i)+(i>>5&31)||V==16&&f<1)return r=null,a=9,s.msg="invalid bit length repeat",p=-3,t.bitb=o,t.bitk=h,s.avail_in=A,s.total_in+=w-s.next_in_index,s.next_in_index=w,t.write=v,t.inflate_flush(s,p);V=V==16?r[f-1]:0;do r[f++]=V;while(--O!=0);_=f}}if(g[0]=-1,R=[],F=[],W=[],$=[],R[0]=9,F[0]=6,i=u,i=N.inflate_trees_dynamic(257+(31&i),1+(i>>5&31),r,R,F,W,$,P,s),i!=0)return i==-3&&(r=null,a=9),p=i,t.bitb=o,t.bitk=h,s.avail_in=A,s.total_in+=w-s.next_in_index,s.next_in_index=w,t.write=v,t.inflate_flush(s,p);S.init(R[0],F[0],P,W[0],P,$[0]),a=6;case 6:if(t.bitb=o,t.bitk=h,s.avail_in=A,s.total_in+=w-s.next_in_index,s.next_in_index=w,t.write=v,(p=S.proc(t,s,p))!=1)return t.inflate_flush(s,p);if(p=0,S.free(s),w=s.next_in_index,A=s.avail_in,o=t.bitb,h=t.bitk,v=t.write,y=v<t.read?t.read-v-1:t.end-v,C===0){a=0;break}a=7;case 7:if(t.write=v,p=t.inflate_flush(s,p),v=t.write,y=v<t.read?t.read-v-1:t.end-v,t.read!=t.write)return t.bitb=o,t.bitk=h,s.avail_in=A,s.total_in+=w-s.next_in_index,s.next_in_index=w,t.write=v,t.inflate_flush(s,p);a=8;case 8:return p=1,t.bitb=o,t.bitk=h,s.avail_in=A,s.total_in+=w-s.next_in_index,s.next_in_index=w,t.write=v,t.inflate_flush(s,p);case 9:return p=-3,t.bitb=o,t.bitk=h,s.avail_in=A,s.total_in+=w-s.next_in_index,s.next_in_index=w,t.write=v,t.inflate_flush(s,p);default:return p=-2,t.bitb=o,t.bitk=h,s.avail_in=A,s.total_in+=w-s.next_in_index,s.next_in_index=w,t.write=v,t.inflate_flush(s,p)}}},t.free=function(s){t.reset(s,null),t.window=null,P=null},t.set_dictionary=function(s,p,i){t.window.set(s.subarray(p,p+i),0),t.read=t.write=i},t.sync_point=function(){return a==1?1:0}}const ot=13,Qe=[0,0,255,255];function tn(){const n=this;function e(t){return t&&t.istate?(t.total_in=t.total_out=0,t.msg=null,t.istate.mode=7,t.istate.blocks.reset(t,null),0):-2}n.mode=0,n.method=0,n.was=[0],n.need=0,n.marker=0,n.wbits=0,n.inflateEnd=function(t){return n.blocks&&n.blocks.free(t),n.blocks=null,0},n.inflateInit=function(t,r){return t.msg=null,n.blocks=null,r<8||r>15?(n.inflateEnd(t),-2):(n.wbits=r,t.istate.blocks=new ft(t,1<<r),e(t),0)},n.inflate=function(t,r){let a,d;if(!t||!t.istate||!t.next_in)return-2;const u=t.istate;for(r=r==4?-5:0,a=-5;;)switch(u.mode){case 0:if(t.avail_in===0)return a;if(a=r,t.avail_in--,t.total_in++,(15&(u.method=t.read_byte(t.next_in_index++)))!=8){u.mode=ot,t.msg="unknown compression method",u.marker=5;break}if(8+(u.method>>4)>u.wbits){u.mode=ot,t.msg="invalid window size",u.marker=5;break}u.mode=1;case 1:if(t.avail_in===0)return a;if(a=r,t.avail_in--,t.total_in++,d=255&t.read_byte(t.next_in_index++),((u.method<<8)+d)%31!=0){u.mode=ot,t.msg="incorrect header check",u.marker=5;break}if(!(32&d)){u.mode=7;break}u.mode=2;case 2:if(t.avail_in===0)return a;a=r,t.avail_in--,t.total_in++,u.need=(255&t.read_byte(t.next_in_index++))<<24&4278190080,u.mode=3;case 3:if(t.avail_in===0)return a;a=r,t.avail_in--,t.total_in++,u.need+=(255&t.read_byte(t.next_in_index++))<<16&16711680,u.mode=4;case 4:if(t.avail_in===0)return a;a=r,t.avail_in--,t.total_in++,u.need+=(255&t.read_byte(t.next_in_index++))<<8&65280,u.mode=5;case 5:return t.avail_in===0?a:(a=r,t.avail_in--,t.total_in++,u.need+=255&t.read_byte(t.next_in_index++),u.mode=6,2);case 6:return u.mode=ot,t.msg="need dictionary",u.marker=0,-2;case 7:if(a=u.blocks.proc(t,a),a==-3){u.mode=ot,u.marker=0;break}if(a==0&&(a=r),a!=1)return a;a=r,u.blocks.reset(t,u.was),u.mode=12;case 12:return 1;case ot:return-3;default:return-2}},n.inflateSetDictionary=function(t,r,a){let d=0,u=a;if(!t||!t.istate||t.istate.mode!=6)return-2;const _=t.istate;return u>=1<<_.wbits&&(u=(1<<_.wbits)-1,d=a-u),_.blocks.set_dictionary(r,d,u),_.mode=7,0},n.inflateSync=function(t){let r,a,d,u,_;if(!t||!t.istate)return-2;const x=t.istate;if(x.mode!=ot&&(x.mode=ot,x.marker=0),(r=t.avail_in)===0)return-5;for(a=t.next_in_index,d=x.marker;r!==0&&d<4;)t.read_byte(a)==Qe[d]?d++:d=t.read_byte(a)!==0?0:4-d,a++,r--;return t.total_in+=a-t.next_in_index,t.next_in_index=a,t.avail_in=r,x.marker=d,d!=4?-3:(u=t.total_in,_=t.total_out,e(t),t.total_in=u,t.total_out=_,x.mode=7,0)},n.inflateSyncPoint=function(t){return t&&t.istate&&t.istate.blocks?t.istate.blocks.sync_point():-2}}function Jt(){}Jt.prototype={inflateInit:function(n){const e=this;return e.istate=new tn,n||(n=15),e.istate.inflateInit(e,n)},inflate:function(n){const e=this;return e.istate?e.istate.inflate(e,n):-2},inflateEnd:function(){const n=this;if(!n.istate)return-2;const e=n.istate.inflateEnd(n);return n.istate=null,e},inflateSync:function(){const n=this;return n.istate?n.istate.inflateSync(n):-2},inflateSetDictionary:function(n,e){const t=this;return t.istate?t.istate.inflateSetDictionary(t,n,e):-2},read_byte:function(n){return this.next_in[n]},read_buf:function(n,e){return this.next_in.subarray(n,n+e)}};const en={chunkSize:524288,maxWorkers:typeof navigator<"u"&&navigator.hardwareConcurrency||2,terminateWorkerTimeout:5e3,useWebWorkers:!0,workerScripts:void 0},et=Object.assign({},en);function Xt(n){if(n.baseURL!==void 0&&(et.baseURL=n.baseURL),n.chunkSize!==void 0&&(et.chunkSize=n.chunkSize),n.maxWorkers!==void 0&&(et.maxWorkers=n.maxWorkers),n.terminateWorkerTimeout!==void 0&&(et.terminateWorkerTimeout=n.terminateWorkerTimeout),n.useWebWorkers!==void 0&&(et.useWebWorkers=n.useWebWorkers),n.Deflate!==void 0&&(et.Deflate=n.Deflate),n.Inflate!==void 0&&(et.Inflate=n.Inflate),n.workerScripts!==void 0){if(n.workerScripts.deflate){if(!Array.isArray(n.workerScripts.deflate))throw new Error("workerScripts.deflate must be an array");et.workerScripts||(et.workerScripts={}),et.workerScripts.deflate=n.workerScripts.deflate}if(n.workerScripts.inflate){if(!Array.isArray(n.workerScripts.inflate))throw new Error("workerScripts.inflate must be an array");et.workerScripts||(et.workerScripts={}),et.workerScripts.inflate=n.workerScripts.inflate}}}const Qt="Abort error";function It(n,e){if(n&&n.aborted)throw e.flush(),new Error(Qt)}async function te(n,e){return e.length&&await n.writeUint8Array(e),e.length}const ee="HTTP error ",zt="HTTP Range not supported",Ft="text/plain",Mt="GET",nn="bytes";class ne{constructor(){this.size=0}init(){this.initialized=!0}}class ct extends ne{}class yt extends ne{writeUint8Array(e){this.size+=e.length}}class re extends ct{constructor(e){super(),this.blob=e,this.size=e.size}async readUint8Array(e,t){if(this.blob.arrayBuffer)return new Uint8Array(await this.blob.slice(e,e+t).arrayBuffer());{const r=new FileReader;return new Promise((a,d)=>{r.onload=u=>a(new Uint8Array(u.target.result)),r.onerror=()=>d(r.error),r.readAsArrayBuffer(this.blob.slice(e,e+t))})}}}class rn extends ct{constructor(e,t){super(),this.url=e,this.preventHeadRequest=t.preventHeadRequest,this.useRangeHeader=t.useRangeHeader,this.forceRangeRequests=t.forceRangeRequests,this.options=Object.assign({},t),delete this.options.preventHeadRequest,delete this.options.useRangeHeader,delete this.options.forceRangeRequests,delete this.options.useXHR}async init(){super.init(),await ie(this,Lt,oe)}async readUint8Array(e,t){return se(this,e,t,Lt,oe)}}class sn extends ct{constructor(e,t){super(),this.url=e,this.preventHeadRequest=t.preventHeadRequest,this.useRangeHeader=t.useRangeHeader,this.forceRangeRequests=t.forceRangeRequests,this.options=t}async init(){super.init(),await ie(this,Ot,ce)}async readUint8Array(e,t){return se(this,e,t,Ot,ce)}}async function ie(n,e,t){if(function(r){if(typeof document<"u"){const a=document.createElement("a");return a.href=r,a.protocol=="http:"||a.protocol=="https:"}return/^https?:\/\//i.test(r)}(n.url)&&(n.useRangeHeader||n.forceRangeRequests)){const r=await e(Mt,n,ae(n));if(!n.forceRangeRequests&&r.headers.get("Accept-Ranges")!=nn)throw new Error(zt);{let a;const d=r.headers.get("Content-Range");if(d){const u=d.trim().split(/\s*\/\s*/);if(u.length){const _=u[1];_&&_!="*"&&(a=Number(_))}}a===void 0?await de(n,e,t):n.size=a}}else await de(n,e,t)}async function se(n,e,t,r,a){if(n.useRangeHeader||n.forceRangeRequests){const d=await r(Mt,n,ae(n,e,t));if(d.status!=206)throw new Error(zt);return new Uint8Array(await d.arrayBuffer())}return n.data||await a(n,n.options),new Uint8Array(n.data.subarray(e,e+t))}function ae(n,e=0,t=1){return Object.assign({},Dt(n),{Range:"bytes="+e+"-"+(e+t-1)})}function Dt(n){let e=n.options.headers;if(e)return Symbol.iterator in e?Object.fromEntries(e):e}async function oe(n){await le(n,Lt)}async function ce(n){await le(n,Ot)}async function le(n,e){const t=await e(Mt,n,Dt(n));n.data=new Uint8Array(await t.arrayBuffer()),n.size||(n.size=n.data.length)}async function de(n,e,t){if(n.preventHeadRequest)await t(n,n.options);else{const r=(await e("HEAD",n,Dt(n))).headers.get("Content-Length");r?n.size=Number(r):await t(n,n.options)}}async function Lt(n,{options:e,url:t},r){const a=await fetch(t,Object.assign({},e,{method:n,headers:r}));if(a.status<400)return a;throw new Error(ee+(a.statusText||a.status))}function Ot(n,{url:e},t){return new Promise((r,a)=>{const d=new XMLHttpRequest;if(d.addEventListener("load",()=>{if(d.status<400){const u=[];d.getAllResponseHeaders().trim().split(/[\r\n]+/).forEach(_=>{const x=_.trim().split(/\s*:\s*/);x[0]=x[0].trim().replace(/^[a-z]|-[a-z]/g,g=>g.toUpperCase()),u.push(x)}),r({status:d.status,arrayBuffer:()=>d.response,headers:new Map(u)})}else a(new Error(ee+(d.statusText||d.status)))},!1),d.addEventListener("error",u=>a(u.detail.error),!1),d.open(n,e),t)for(const u of Object.entries(t))d.setRequestHeader(u[0],u[1]);d.responseType="arraybuffer",d.send()})}class ue extends ct{constructor(e,t={}){super(),this.url=e,t.useXHR?this.reader=new sn(e,t):this.reader=new rn(e,t)}set size(e){}get size(){return this.reader.size}async init(){super.init(),await this.reader.init()}async readUint8Array(e,t){return this.reader.readUint8Array(e,t)}}const At=4294967295,he=33639248,fe=101075792,pe=[];for(let n=0;n<256;n++){let e=n;for(let t=0;t<8;t++)1&e?e=e>>>1^3988292384:e>>>=1;pe[n]=e}class xt{constructor(e){this.crc=e||-1}append(e){let t=0|this.crc;for(let r=0,a=0|e.length;r<a;r++)t=t>>>8^pe[255&(t^e[r])];this.crc=t}get(){return~this.crc}}const nt={concat(n,e){if(n.length===0||e.length===0)return n.concat(e);const t=n[n.length-1],r=nt.getPartial(t);return r===32?n.concat(e):nt._shiftRight(e,r,0|t,n.slice(0,n.length-1))},bitLength(n){const e=n.length;if(e===0)return 0;const t=n[e-1];return 32*(e-1)+nt.getPartial(t)},clamp(n,e){if(32*n.length<e)return n;const t=(n=n.slice(0,Math.ceil(e/32))).length;return e&=31,t>0&&e&&(n[t-1]=nt.partial(e,n[t-1]&2147483648>>e-1,1)),n},partial:(n,e,t)=>n===32?e:(t?0|e:e<<32-n)+1099511627776*n,getPartial:n=>Math.round(n/1099511627776)||32,_shiftRight(n,e,t,r){for(r===void 0&&(r=[]);e>=32;e-=32)r.push(t),t=0;if(e===0)return r.concat(n);for(let u=0;u<n.length;u++)r.push(t|n[u]>>>e),t=n[u]<<32-e;const a=n.length?n[n.length-1]:0,d=nt.getPartial(a);return r.push(nt.partial(e+d&31,e+d>32?t:r.pop(),1)),r}},_e={bytes:{fromBits(n){const e=nt.bitLength(n)/8,t=new Uint8Array(e);let r;for(let a=0;a<e;a++)!(3&a)&&(r=n[a/4]),t[a]=r>>>24,r<<=8;return t},toBits(n){const e=[];let t,r=0;for(t=0;t<n.length;t++)r=r<<8|n[t],(3&t)==3&&(e.push(r),r=0);return 3&t&&e.push(nt.partial(8*(3&t),r)),e}}},we={sha1:function(n){n?(this._h=n._h.slice(0),this._buffer=n._buffer.slice(0),this._length=n._length):this.reset()}};we.sha1.prototype={blockSize:512,reset:function(){const n=this;return n._h=this._init.slice(0),n._buffer=[],n._length=0,n},update:function(n){const e=this;typeof n=="string"&&(n=_e.utf8String.toBits(n));const t=e._buffer=nt.concat(e._buffer,n),r=e._length,a=e._length=r+nt.bitLength(n);if(a>9007199254740991)throw new Error("Cannot hash more than 2^53 - 1 bits");const d=new Uint32Array(t);let u=0;for(let _=e.blockSize+r-(e.blockSize+r&e.blockSize-1);_<=a;_+=e.blockSize)e._block(d.subarray(16*u,16*(u+1))),u+=1;return t.splice(0,16*u),e},finalize:function(){const n=this;let e=n._buffer;const t=n._h;e=nt.concat(e,[nt.partial(1,1)]);for(let r=e.length+2;15&r;r++)e.push(0);for(e.push(Math.floor(n._length/4294967296)),e.push(0|n._length);e.length;)n._block(e.splice(0,16));return n.reset(),t},_init:[1732584193,4023233417,2562383102,271733878,3285377520],_key:[1518500249,1859775393,2400959708,3395469782],_f:function(n,e,t,r){return n<=19?e&t|~e&r:n<=39?e^t^r:n<=59?e&t|e&r|t&r:n<=79?e^t^r:void 0},_S:function(n,e){return e<<n|e>>>32-n},_block:function(n){const e=this,t=e._h,r=Array(80);for(let g=0;g<16;g++)r[g]=n[g];let a=t[0],d=t[1],u=t[2],_=t[3],x=t[4];for(let g=0;g<=79;g++){g>=16&&(r[g]=e._S(1,r[g-3]^r[g-8]^r[g-14]^r[g-16]));const S=e._S(5,a)+e._f(g,d,u,_)+x+r[g]+e._key[Math.floor(g/20)]|0;x=_,_=u,u=e._S(30,d),d=a,a=S}t[0]=t[0]+a|0,t[1]=t[1]+d|0,t[2]=t[2]+u|0,t[3]=t[3]+_|0,t[4]=t[4]+x|0}};const an={aes:class{constructor(n){const e=this;e._tables=[[[],[],[],[],[]],[[],[],[],[],[]]],e._tables[0][0][0]||e._precompute();const t=e._tables[0][4],r=e._tables[1],a=n.length;let d,u,_,x=1;if(a!==4&&a!==6&&a!==8)throw new Error("invalid aes key size");for(e._key=[u=n.slice(0),_=[]],d=a;d<4*a+28;d++){let g=u[d-1];(d%a==0||a===8&&d%a==4)&&(g=t[g>>>24]<<24^t[g>>16&255]<<16^t[g>>8&255]<<8^t[255&g],d%a==0&&(g=g<<8^g>>>24^x<<24,x=x<<1^283*(x>>7))),u[d]=u[d-a]^g}for(let g=0;d;g++,d--){const S=u[3&g?d:d-4];_[g]=d<=4||g<4?S:r[0][t[S>>>24]]^r[1][t[S>>16&255]]^r[2][t[S>>8&255]]^r[3][t[255&S]]}}encrypt(n){return this._crypt(n,0)}decrypt(n){return this._crypt(n,1)}_precompute(){const n=this._tables[0],e=this._tables[1],t=n[4],r=e[4],a=[],d=[];let u,_,x,g;for(let S=0;S<256;S++)d[(a[S]=S<<1^283*(S>>7))^S]=S;for(let S=u=0;!t[S];S^=_||1,u=d[u]||1){let C=u^u<<1^u<<2^u<<3^u<<4;C=C>>8^255&C^99,t[S]=C,r[C]=S,g=a[x=a[_=a[S]]];let P=16843009*g^65537*x^257*_^16843008*S,N=257*a[C]^16843008*C;for(let s=0;s<4;s++)n[s][S]=N=N<<24^N>>>8,e[s][C]=P=P<<24^P>>>8}for(let S=0;S<5;S++)n[S]=n[S].slice(0),e[S]=e[S].slice(0)}_crypt(n,e){if(n.length!==4)throw new Error("invalid aes block size");const t=this._key[e],r=t.length/4-2,a=[0,0,0,0],d=this._tables[e],u=d[0],_=d[1],x=d[2],g=d[3],S=d[4];let C,P,N,s=n[0]^t[0],p=n[e?3:1]^t[1],i=n[2]^t[2],o=n[e?1:3]^t[3],h=4;for(let w=0;w<r;w++)C=u[s>>>24]^_[p>>16&255]^x[i>>8&255]^g[255&o]^t[h],P=u[p>>>24]^_[i>>16&255]^x[o>>8&255]^g[255&s]^t[h+1],N=u[i>>>24]^_[o>>16&255]^x[s>>8&255]^g[255&p]^t[h+2],o=u[o>>>24]^_[s>>16&255]^x[p>>8&255]^g[255&i]^t[h+3],h+=4,s=C,p=P,i=N;for(let w=0;w<4;w++)a[e?3&-w:w]=S[s>>>24]<<24^S[p>>16&255]<<16^S[i>>8&255]<<8^S[255&o]^t[h++],C=s,s=p,p=i,i=o,o=C;return a}}},on={ctrGladman:class{constructor(n,e){this._prf=n,this._initIv=e,this._iv=e}reset(){this._iv=this._initIv}update(n){return this.calculate(this._prf,n,this._iv)}incWord(n){if((n>>24&255)==255){let e=n>>16&255,t=n>>8&255,r=255&n;e===255?(e=0,t===255?(t=0,r===255?r=0:++r):++t):++e,n=0,n+=e<<16,n+=t<<8,n+=r}else n+=1<<24;return n}incCounter(n){(n[0]=this.incWord(n[0]))===0&&(n[1]=this.incWord(n[1]))}calculate(n,e,t){let r;if(!(r=e.length))return[];const a=nt.bitLength(e);for(let d=0;d<r;d+=4){this.incCounter(t);const u=n.encrypt(t);e[d]^=u[0],e[d+1]^=u[1],e[d+2]^=u[2],e[d+3]^=u[3]}return nt.clamp(e,a)}}},cn={hmacSha1:class{constructor(n){const e=this,t=e._hash=we.sha1,r=[[],[]],a=t.prototype.blockSize/32;e._baseHash=[new t,new t],n.length>a&&(n=t.hash(n));for(let d=0;d<a;d++)r[0][d]=909522486^n[d],r[1][d]=1549556828^n[d];e._baseHash[0].update(r[0]),e._baseHash[1].update(r[1]),e._resultHash=new t(e._baseHash[0])}reset(){const n=this;n._resultHash=new n._hash(n._baseHash[0]),n._updated=!1}update(n){this._updated=!0,this._resultHash.update(n)}digest(){const n=this,e=n._resultHash.finalize(),t=new n._hash(n._baseHash[1]).update(e).finalize();return n.reset(),t}}},Nt="Invalid pasword",_t=16,ge={name:"PBKDF2"},ln=Object.assign({hash:{name:"HMAC"}},ge),dn=Object.assign({iterations:1e3,hash:{name:"SHA-1"}},ge),un=["deriveBits"],kt=[8,12,16],vt=[16,24,32],lt=10,me=[0,0,0,0],at=_e.bytes,be=an.aes,ye=on.ctrGladman,xe=cn.hmacSha1;class hn{constructor(e,t,r){Object.assign(this,{password:e,signed:t,strength:r-1,pendingInput:new Uint8Array(0)})}async append(e){const t=this;if(t.password){const r=rt(e,0,kt[t.strength]+2);await async function(a,d,u){await ve(a,u,rt(d,0,kt[a.strength]));const _=rt(d,kt[a.strength]),x=a.keys.passwordVerification;if(x[0]!=_[0]||x[1]!=_[1])throw new Error(Nt)}(t,r,t.password),t.password=null,t.aesCtrGladman=new ye(new be(t.keys.key),Array.from(me)),t.hmac=new xe(t.keys.authentication),e=rt(e,kt[t.strength]+2)}return ke(t,e,new Uint8Array(e.length-lt-(e.length-lt)%_t),0,lt,!0)}flush(){const e=this,t=e.pendingInput,r=rt(t,0,t.length-lt),a=rt(t,t.length-lt);let d=new Uint8Array(0);if(r.length){const _=at.toBits(r);e.hmac.update(_);const x=e.aesCtrGladman.update(_);d=at.fromBits(x)}let u=!0;if(e.signed){const _=rt(at.fromBits(e.hmac.digest()),0,lt);for(let x=0;x<lt;x++)_[x]!=a[x]&&(u=!1)}return{valid:u,data:d}}}class fn{constructor(e,t){Object.assign(this,{password:e,strength:t-1,pendingInput:new Uint8Array(0)})}async append(e){const t=this;let r=new Uint8Array(0);t.password&&(r=await async function(d,u){const _=crypto.getRandomValues(new Uint8Array(kt[d.strength]));return await ve(d,u,_),Wt(_,d.keys.passwordVerification)}(t,t.password),t.password=null,t.aesCtrGladman=new ye(new be(t.keys.key),Array.from(me)),t.hmac=new xe(t.keys.authentication));const a=new Uint8Array(r.length+e.length-e.length%_t);return a.set(r,0),ke(t,e,a,r.length,0)}flush(){const e=this;let t=new Uint8Array(0);if(e.pendingInput.length){const a=e.aesCtrGladman.update(at.toBits(e.pendingInput));e.hmac.update(a),t=at.fromBits(a)}const r=rt(at.fromBits(e.hmac.digest()),0,lt);return{data:Wt(t,r),signature:r}}}function ke(n,e,t,r,a,d){const u=e.length-a;let _;for(n.pendingInput.length&&(e=Wt(n.pendingInput,e),t=function(x,g){if(g&&g>x.length){const S=x;(x=new Uint8Array(g)).set(S,0)}return x}(t,u-u%_t)),_=0;_<=u-_t;_+=_t){const x=at.toBits(rt(e,_,_+_t));d&&n.hmac.update(x);const g=n.aesCtrGladman.update(x);d||n.hmac.update(g),t.set(at.fromBits(g),_+r)}return n.pendingInput=rt(e,_),t}async function ve(n,e,t){const r=function(_){if(typeof TextEncoder>"u"){_=unescape(encodeURIComponent(_));const x=new Uint8Array(_.length);for(let g=0;g<x.length;g++)x[g]=_.charCodeAt(g);return x}return new TextEncoder().encode(_)}(e),a=await crypto.subtle.importKey("raw",r,ln,!1,un),d=await crypto.subtle.deriveBits(Object.assign({salt:t},dn),a,8*(2*vt[n.strength]+2)),u=new Uint8Array(d);n.keys={key:at.toBits(rt(u,0,vt[n.strength])),authentication:at.toBits(rt(u,vt[n.strength],2*vt[n.strength])),passwordVerification:rt(u,2*vt[n.strength])}}function Wt(n,e){let t=n;return n.length+e.length&&(t=new Uint8Array(n.length+e.length),t.set(n,0),t.set(e,n.length)),t}function rt(n,e,t){return n.subarray(e,t)}const Rt=12;class pn{constructor(e,t){Object.assign(this,{password:e,passwordVerification:t}),Re(this,e)}append(e){const t=this;if(t.password){const r=Se(t,e.subarray(0,Rt));if(t.password=null,r[11]!=t.passwordVerification)throw new Error(Nt);e=e.subarray(Rt)}return Se(t,e)}flush(){return{valid:!0,data:new Uint8Array(0)}}}class _n{constructor(e,t){Object.assign(this,{password:e,passwordVerification:t}),Re(this,e)}append(e){const t=this;let r,a;if(t.password){t.password=null;const d=crypto.getRandomValues(new Uint8Array(Rt));d[11]=t.passwordVerification,r=new Uint8Array(e.length+d.length),r.set(Ae(t,d),0),a=Rt}else r=new Uint8Array(e.length),a=0;return r.set(Ae(t,e),a),r}flush(){return{data:new Uint8Array(0)}}}function Se(n,e){const t=new Uint8Array(e.length);for(let r=0;r<e.length;r++)t[r]=Te(n)^e[r],Pt(n,t[r]);return t}function Ae(n,e){const t=new Uint8Array(e.length);for(let r=0;r<e.length;r++)t[r]=Te(n)^e[r],Pt(n,e[r]);return t}function Re(n,e){n.keys=[305419896,591751049,878082192],n.crcKey0=new xt(n.keys[0]),n.crcKey2=new xt(n.keys[2]);for(let t=0;t<e.length;t++)Pt(n,e.charCodeAt(t))}function Pt(n,e){n.crcKey0.append([e]),n.keys[0]=~n.crcKey0.get(),n.keys[1]=Ue(n.keys[1]+Ee(n.keys[0])),n.keys[1]=Ue(Math.imul(n.keys[1],134775813)+1),n.crcKey2.append([n.keys[1]>>>24]),n.keys[2]=~n.crcKey2.get()}function Te(n){const e=2|n.keys[2];return Ee(Math.imul(e,1^e)>>>8)}function Ee(n){return 255&n}function Ue(n){return 4294967295&n}const Ce="inflate",Bt="Invalid signature";class wn{constructor(e,{signature:t,password:r,signed:a,compressed:d,zipCrypto:u,passwordVerification:_,encryptionStrength:x},{chunkSize:g}){const S=!!r;Object.assign(this,{signature:t,encrypted:S,signed:a,compressed:d,inflate:d&&new e({chunkSize:g}),crc32:a&&new xt,zipCrypto:u,decrypt:S&&u?new pn(r,_):new hn(r,a,x)})}async append(e){const t=this;return t.encrypted&&e.length&&(e=await t.decrypt.append(e)),t.compressed&&e.length&&(e=await t.inflate.append(e)),(!t.encrypted||t.zipCrypto)&&t.signed&&e.length&&t.crc32.append(e),e}async flush(){const e=this;let t,r=new Uint8Array(0);if(e.encrypted){const a=e.decrypt.flush();if(!a.valid)throw new Error(Bt);r=a.data}if((!e.encrypted||e.zipCrypto)&&e.signed){const a=new DataView(new Uint8Array(4).buffer);if(t=e.crc32.get(),a.setUint32(0,t),e.signature!=a.getUint32(0,!1))throw new Error(Bt)}return e.compressed&&(r=await e.inflate.append(r)||new Uint8Array(0),await e.inflate.flush()),{data:r,signature:t}}}class gn{constructor(e,{encrypted:t,signed:r,compressed:a,level:d,zipCrypto:u,password:_,passwordVerification:x,encryptionStrength:g},{chunkSize:S}){Object.assign(this,{encrypted:t,signed:r,compressed:a,deflate:a&&new e({level:d||5,chunkSize:S}),crc32:r&&new xt,zipCrypto:u,encrypt:t&&u?new _n(_,x):new fn(_,g)})}async append(e){const t=this;let r=e;return t.compressed&&e.length&&(r=await t.deflate.append(e)),t.encrypted&&r.length&&(r=await t.encrypt.append(r)),(!t.encrypted||t.zipCrypto)&&t.signed&&e.length&&t.crc32.append(e),r}async flush(){const e=this;let t,r=new Uint8Array(0);if(e.compressed&&(r=await e.deflate.flush()||new Uint8Array(0)),e.encrypted){r=await e.encrypt.append(r);const a=e.encrypt.flush();t=a.signature;const d=new Uint8Array(r.length+a.data.length);d.set(r,0),d.set(a.data,r.length),r=d}return e.encrypted&&!e.zipCrypto||!e.signed||(t=e.crc32.get()),{data:r,signature:t}}}const Ie="init",ze="append",Ht="flush",mn="message";let Fe=!0;var jt=(n,e,t,r,a,d,u)=>(Object.assign(n,{busy:!0,codecConstructor:e,options:Object.assign({},t),scripts:u,terminate(){n.worker&&!n.busy&&(n.worker.terminate(),n.interface=null)},onTaskFinished(){n.busy=!1,a(n)}}),d?function(_,x){let g;const S={type:"module"};if(!_.interface){if(Fe)try{_.worker=C({},x.baseURL)}catch{Fe=!1,_.worker=C(S,x.baseURL)}else _.worker=C(S,x.baseURL);_.worker.addEventListener(mn,s,!1),_.interface={append:p=>P({type:ze,data:p}),flush:()=>P({type:Ht})}}return _.interface;function C(p,i){let o;try{o=new URL(_.scripts[0],i)}catch{o=_.scripts[0]}return new Worker(o,p)}async function P(p){if(!g){const i=_.options,o=_.scripts.slice(1);await N({scripts:o,type:Ie,options:i,config:{chunkSize:x.chunkSize}})}return N(p)}function N(p){const i=_.worker,o=new Promise((h,w)=>g={resolve:h,reject:w});try{if(p.data)try{p.data=p.data.buffer,i.postMessage(p,[p.data])}catch{i.postMessage(p)}else i.postMessage(p)}catch(h){g.reject(h),g=null,_.onTaskFinished()}return o}function s(p){const i=p.data;if(g){const o=i.error,h=i.type;if(o){const w=new Error(o.message);w.stack=o.stack,g.reject(w),g=null,_.onTaskFinished()}else if(h==Ie||h==Ht||h==ze){const w=i.data;h==Ht?(g.resolve({data:new Uint8Array(w),signature:i.signature}),g=null,_.onTaskFinished()):g.resolve(w&&new Uint8Array(w))}}}}(n,r):function(_,x){const g=function(S,C,P){return C.codecType.startsWith("deflate")?new gn(S,C,P):C.codecType.startsWith(Ce)?new wn(S,C,P):void 0}(_.codecConstructor,_.options,x);return{async append(S){try{return await g.append(S)}catch(C){throw _.onTaskFinished(),C}},async flush(){try{return await g.flush()}finally{_.onTaskFinished()}}}}(n,r));let pt=[],qt=[];function Me(n){n.terminateTimeout&&(clearTimeout(n.terminateTimeout),n.terminateTimeout=null)}const bn="\0☺☻♥♦♣♠•◘○◙♂♀♪♫☼►◄↕‼¶§▬↨↑↓→←∟↔▲▼ !\"#$%&'()*+,-./0123456789:;<=>?@ABCDEFGHIJKLMNOPQRSTUVWXYZ[\\]^_`abcdefghijklmnopqrstuvwxyz{|}~⌂ÇüéâäàåçêëèïîìÄÅÉæÆôöòûùÿÖÜ¢£¥₧ƒáíóúñÑªº¿⌐¬½¼¡«»░▒▓│┤╡╢╖╕╣║╗╝╜╛┐└┴┬├─┼╞╟╚╔╩╦╠═╬╧╨╤╥╙╘╒╓╫╪┘┌█▄▌▐▀αßΓπΣσµτΦΘΩδ∞φε∩≡±≥≤⌠⌡÷≈°∙·√ⁿ²■ ".split("");async function Vt(n,e){if(e&&e.trim().toLowerCase()=="cp437")return(t=>{let r="";for(let a=0;a<t.length;a++)r+=bn[t[a]];return r})(n);if(typeof TextDecoder>"u"){const t=new FileReader;return new Promise((r,a)=>{t.onload=d=>r(d.target.result),t.onerror=()=>a(t.error),t.readAsText(new Blob([n]))})}return new TextDecoder(e).decode(n)}const yn=["filename","rawFilename","directory","encrypted","compressedSize","uncompressedSize","lastModDate","rawLastModDate","comment","rawComment","signature","extraField","rawExtraField","bitFlag","extraFieldZip64","extraFieldUnicodePath","extraFieldUnicodeComment","extraFieldAES","filenameUTF8","commentUTF8","offset","zip64","compressionMethod","extraFieldNTFS","lastAccessDate","creationDate","extraFieldExtendedTimestamp","version","versionMadeBy","msDosCompatible","internalFileAttribute","externalFileAttribute"];class De{constructor(e){yn.forEach(t=>this[t]=e[t])}}const Tt="File format is not recognized",Le="End of central directory not found",Oe="End of Zip64 central directory not found",Ne="End of Zip64 central directory locator not found",We="Central directory header not found",Pe="Local file header not found",Be="Zip64 extra field not found",He="File contains encrypted entry",je="Encryption method not supported",$t="Compression method not supported",qe="utf-8",Ve="cp437",$e=["uncompressedSize","compressedSize","offset"];class xn{constructor(e,t,r){Object.assign(this,{reader:e,config:t,options:r})}async getData(e,t,r={}){const a=this,{reader:d,offset:u,extraFieldAES:_,compressionMethod:x,config:g,bitFlag:S,signature:C,rawLastModDate:P,compressedSize:N}=a,s=a.localDirectory={};d.initialized||await d.init();let p=await dt(d,u,30);const i=X(p);let o=wt(a,r,"password");if(o=o&&o.length&&o,_&&_.originalCompressionMethod!=99)throw new Error($t);if(x!=0&&x!=8)throw new Error($t);if(J(i,0)!=67324752)throw new Error(Pe);Ge(s,i,4),p=await dt(d,u,30+s.filenameLength+s.extraFieldLength),s.rawExtraField=p.subarray(30+s.filenameLength),await Ke(a,s,i,4),t.lastAccessDate=s.lastAccessDate,t.creationDate=s.creationDate;const h=a.encrypted&&s.encrypted,w=h&&!_;if(h){if(!w&&_.strength===void 0)throw new Error(je);if(!o)throw new Error(He)}const A=await function(f,k,z){const U=!(!k.compressed&&!k.signed&&!k.encrypted)&&(k.useWebWorkers||k.useWebWorkers===void 0&&z.useWebWorkers),T=U&&z.workerScripts?z.workerScripts[k.codecType]:[];if(pt.length<z.maxWorkers){const F={};return pt.push(F),jt(F,f,k,z,R,U,T)}{const F=pt.find(W=>!W.busy);return F?(Me(F),jt(F,f,k,z,R,U,T)):new Promise(W=>qt.push({resolve:W,codecConstructor:f,options:k,webWorker:U,scripts:T}))}function R(F){if(qt.length){const[{resolve:W,codecConstructor:$,options:O,webWorker:V,scripts:ut}]=qt.splice(0,1);W(jt(F,$,O,z,R,V,ut))}else F.worker?(Me(F),Number.isFinite(z.terminateWorkerTimeout)&&z.terminateWorkerTimeout>=0&&(F.terminateTimeout=setTimeout(()=>{pt=pt.filter(W=>W!=F),F.terminate()},z.terminateWorkerTimeout))):pt=pt.filter(W=>W!=F)}}(g.Inflate,{codecType:Ce,password:o,zipCrypto:w,encryptionStrength:_&&_.strength,signed:wt(a,r,"checkSignature"),passwordVerification:w&&(S.dataDescriptor?P>>>8&255:C>>>24&255),signature:C,compressed:x!=0,encrypted:h,useWebWorkers:wt(a,r,"useWebWorkers")},g);e.initialized||await e.init();const v=wt(a,r,"signal"),y=u+30+s.filenameLength+s.extraFieldLength;return await async function(f,k,z,U,T,R,F){const W=Math.max(R.chunkSize,64);return async function $(O=0,V=0){const ut=F.signal;if(O<T){It(ut,f);const ht=await k.readUint8Array(O+U,Math.min(W,T-O)),H=ht.length;It(ut,f);const mt=await f.append(ht);if(It(ut,f),V+=await te(z,mt),F.onprogress)try{F.onprogress(O+H,T)}catch{}return $(O+W,V)}{const ht=await f.flush();return V+=await te(z,ht.data),{signature:ht.signature,length:V}}}()}(A,d,e,y,N,g,{onprogress:r.onprogress,signal:v}),e.getData()}}function Ge(n,e,t){const r=n.rawBitFlag=it(e,t+2),a=(1&r)==1,d=J(e,t+6);Object.assign(n,{encrypted:a,version:it(e,t),bitFlag:{level:(6&r)>>1,dataDescriptor:(8&r)==8,languageEncodingFlag:(2048&r)==2048},rawLastModDate:d,lastModDate:kn(d),filenameLength:it(e,t+22),extraFieldLength:it(e,t+24)})}async function Ke(n,e,t,r){const a=e.rawExtraField,d=e.extraField=new Map,u=X(new Uint8Array(a));let _=0;try{for(;_<a.length;){const p=it(u,_),i=it(u,_+2);d.set(p,{type:p,data:a.slice(_+4,_+4+i)}),_+=4+i}}catch{}const x=it(t,r+4);e.signature=J(t,r+10),e.uncompressedSize=J(t,r+18),e.compressedSize=J(t,r+14);const g=d.get(1);g&&(function(p,i){i.zip64=!0;const o=X(p.data);p.values=[];for(let w=0;w<Math.floor(p.data.length/8);w++)p.values.push(Et(o,0+8*w));const h=$e.filter(w=>i[w]==At);for(let w=0;w<h.length;w++)p[h[w]]=p.values[w];$e.forEach(w=>{if(i[w]==At){if(p[w]===void 0)throw new Error(Be);i[w]=p[w]}})}(g,e),e.extraFieldZip64=g);const S=d.get(28789);S&&(await Ze(S,"filename","rawFilename",e,n),e.extraFieldUnicodePath=S);const C=d.get(25461);C&&(await Ze(C,"comment","rawComment",e,n),e.extraFieldUnicodeComment=C);const P=d.get(39169);P?(function(p,i,o){const h=X(p.data);p.vendorVersion=gt(h,0),p.vendorId=gt(h,2);const w=gt(h,4);p.strength=w,p.originalCompressionMethod=o,i.compressionMethod=p.compressionMethod=it(h,5)}(P,e,x),e.extraFieldAES=P):e.compressionMethod=x;const N=d.get(10);N&&(function(p,i){const o=X(p.data);let h,w=4;try{for(;w<p.data.length&&!h;){const A=it(o,w),v=it(o,w+2);A==1&&(h=p.data.slice(w+4,w+4+v)),w+=4+v}}catch{}try{if(h&&h.length==24){const A=X(h),v=A.getBigUint64(0,!0),y=A.getBigUint64(8,!0),f=A.getBigUint64(16,!0);Object.assign(p,{rawLastModDate:v,rawLastAccessDate:y,rawCreationDate:f});const k=Gt(v),z=Gt(y),U={lastModDate:k,lastAccessDate:z,creationDate:Gt(f)};Object.assign(p,U),Object.assign(i,U)}}catch{}}(N,e),e.extraFieldNTFS=N);const s=d.get(21589);s&&(function(p,i){const o=X(p.data),h=gt(o,0),w=[],A=[];(1&h)==1&&(w.push("lastModDate"),A.push("rawLastModDate")),(2&h)==2&&(w.push("lastAccessDate"),A.push("rawLastAccessDate")),(4&h)==4&&(w.push("creationDate"),A.push("rawCreationDate"));let v=1;w.forEach((y,f)=>{if(p.data.length>=v+4){const k=J(o,v);i[y]=p[y]=new Date(1e3*k);const z=A[f];p[z]=k}v+=4})}(s,e),e.extraFieldExtendedTimestamp=s)}async function Ze(n,e,t,r,a){const d=X(n.data);n.version=gt(d,0),n.signature=J(d,1);const u=new xt;u.append(a[t]);const _=X(new Uint8Array(4));_.setUint32(0,u.get(),!0),n[e]=await Vt(n.data.subarray(5)),n.valid=!a.bitFlag.languageEncodingFlag&&n.signature==J(_,0),n.valid&&(r[e]=n[e],r[e+"UTF8"]=!0)}function wt(n,e,t){return e[t]===void 0?n.options[t]:e[t]}function kn(n){const e=(4294901760&n)>>16,t=65535&n;try{return new Date(1980+((65024&e)>>9),((480&e)>>5)-1,31&e,(63488&t)>>11,(2016&t)>>5,2*(31&t),0)}catch{}}function Gt(n){return new Date(Number(n/BigInt(1e4)-BigInt(116444736e5)))}function gt(n,e){return n.getUint8(e)}function it(n,e){return n.getUint16(e,!0)}function J(n,e){return n.getUint32(e,!0)}function Et(n,e){return Number(n.getBigUint64(e,!0))}function X(n){return new DataView(n.buffer)}function dt(n,e,t){return n.readUint8Array(e,t)}Xt({Inflate:function(n){const e=new Jt,t=n&&n.chunkSize?Math.floor(2*n.chunkSize):131072,r=new Uint8Array(t);let a=!1;e.inflateInit(),e.next_out=r,this.append=function(d,u){const _=[];let x,g,S=0,C=0,P=0;if(d.length!==0){e.next_in_index=0,e.next_in=d,e.avail_in=d.length;do{if(e.next_out_index=0,e.avail_out=t,e.avail_in!==0||a||(e.next_in_index=0,a=!0),x=e.inflate(0),a&&x===-5){if(e.avail_in!==0)throw new Error("inflating: bad input")}else if(x!==0&&x!==1)throw new Error("inflating: "+e.msg);if((a||x===1)&&e.avail_in===d.length)throw new Error("inflating: bad input");e.next_out_index&&(e.next_out_index===t?_.push(new Uint8Array(r)):_.push(r.slice(0,e.next_out_index))),P+=e.next_out_index,u&&e.next_in_index>0&&e.next_in_index!=S&&(u(e.next_in_index),S=e.next_in_index)}while(e.avail_in>0||e.avail_out===0);return _.length>1?(g=new Uint8Array(P),_.forEach(function(N){g.set(N,C),C+=N.length})):g=_[0]||new Uint8Array(0),g}},this.flush=function(){e.inflateEnd()}}}),l.BlobReader=re,l.BlobWriter=class extends yt{constructor(n){super(),this.contentType=n,this.arrayBuffers=[]}async writeUint8Array(n){super.writeUint8Array(n),this.arrayBuffers.push(n.buffer)}getData(){return this.blob||(this.blob=new Blob(this.arrayBuffers,{type:this.contentType})),this.blob}},l.Data64URIReader=class extends ct{constructor(n){super(),this.dataURI=n;let e=n.length;for(;n.charAt(e-1)=="=";)e--;this.dataStart=n.indexOf(",")+1,this.size=Math.floor(.75*(e-this.dataStart))}async readUint8Array(n,e){const t=new Uint8Array(e),r=4*Math.floor(n/3),a=atob(this.dataURI.substring(r+this.dataStart,4*Math.ceil((n+e)/3)+this.dataStart)),d=n-3*Math.floor(r/4);for(let u=d;u<d+e;u++)t[u-d]=a.charCodeAt(u);return t}},l.Data64URIWriter=class extends yt{constructor(n){super(),this.data="data:"+(n||"")+";base64,",this.pending=[]}async writeUint8Array(n){super.writeUint8Array(n);let e=0,t=this.pending;const r=this.pending.length;for(this.pending="",e=0;e<3*Math.floor((r+n.length)/3)-r;e++)t+=String.fromCharCode(n[e]);for(;e<n.length;e++)this.pending+=String.fromCharCode(n[e]);t.length>2?this.data+=btoa(t):this.pending=t}getData(){return this.data+btoa(this.pending)}},l.ERR_ABORT=Qt,l.ERR_BAD_FORMAT=Tt,l.ERR_CENTRAL_DIRECTORY_NOT_FOUND=We,l.ERR_ENCRYPTED=He,l.ERR_EOCDR_LOCATOR_ZIP64_NOT_FOUND=Ne,l.ERR_EOCDR_NOT_FOUND=Le,l.ERR_EOCDR_ZIP64_NOT_FOUND=Oe,l.ERR_EXTRAFIELD_ZIP64_NOT_FOUND=Be,l.ERR_HTTP_RANGE=zt,l.ERR_INVALID_PASSWORD=Nt,l.ERR_INVALID_SIGNATURE=Bt,l.ERR_LOCAL_FILE_HEADER_NOT_FOUND=Pe,l.ERR_UNSUPPORTED_COMPRESSION=$t,l.ERR_UNSUPPORTED_ENCRYPTION=je,l.HttpRangeReader=class extends ue{constructor(n,e={}){e.useRangeHeader=!0,super(n,e)}},l.HttpReader=ue,l.Reader=ct,l.TextReader=class extends ct{constructor(n){super(),this.blobReader=new re(new Blob([n],{type:Ft}))}async init(){super.init(),this.blobReader.init(),this.size=this.blobReader.size}async readUint8Array(n,e){return this.blobReader.readUint8Array(n,e)}},l.TextWriter=class extends yt{constructor(n){super(),this.encoding=n,this.blob=new Blob([],{type:Ft})}async writeUint8Array(n){super.writeUint8Array(n),this.blob=new Blob([this.blob,n.buffer],{type:Ft})}getData(){if(this.blob.text)return this.blob.text();{const n=new FileReader;return new Promise((e,t)=>{n.onload=r=>e(r.target.result),n.onerror=()=>t(n.error),n.readAsText(this.blob,this.encoding)})}}},l.Uint8ArrayReader=class extends ct{constructor(n){super(),this.array=n,this.size=n.length}async readUint8Array(n,e){return this.array.slice(n,n+e)}},l.Uint8ArrayWriter=class extends yt{constructor(){super(),this.array=new Uint8Array(0)}async writeUint8Array(n){super.writeUint8Array(n);const e=this.array;this.array=new Uint8Array(e.length+n.length),this.array.set(e),this.array.set(n,e.length)}getData(){return this.array}},l.Writer=yt,l.ZipReader=class{constructor(n,e={}){Object.assign(this,{reader:n,options:e,config:et})}async getEntries(n={}){const e=this,t=e.reader;if(t.initialized||await t.init(),t.size<22)throw new Error(Tt);const r=await async function(N,s,p,i,o){const h=new Uint8Array(4);(function(v,y,f){v.setUint32(y,f,!0)})(X(h),0,s);const w=i+o;return await A(i)||await A(Math.min(w,p));async function A(v){const y=p-v,f=await dt(N,y,v);for(let k=f.length-i;k>=0;k--)if(f[k]==h[0]&&f[k+1]==h[1]&&f[k+2]==h[2]&&f[k+3]==h[3])return{offset:y+k,buffer:f.slice(k,k+i).buffer}}}(t,101010256,t.size,22,1048560);if(!r)throw new Error(Le);const a=X(r);let d=J(a,12),u=J(a,16),_=it(a,8),x=0;if(u==At||d==At||_==65535){const N=X(await dt(t,r.offset-20,20));if(J(N,0)!=117853008)throw new Error(Oe);u=Et(N,8);let s=await dt(t,u,56),p=X(s);const i=r.offset-20-56;if(J(p,0)!=fe&&u!=i){const o=u;u=i,x=u-o,s=await dt(t,u,56),p=X(s)}if(J(p,0)!=fe)throw new Error(Ne);_=Et(p,32),d=Et(p,40),u-=d}if(u<0||u>=t.size)throw new Error(Tt);let g=0,S=await dt(t,u,d),C=X(S);if(d){const N=r.offset-d;if(J(C,g)!=he&&u!=N){const s=u;u=N,x=u-s,S=await dt(t,u,d),C=X(S)}}if(u<0||u>=t.size)throw new Error(Tt);const P=[];for(let N=0;N<_;N++){const s=new xn(t,e.config,e.options);if(J(C,g)!=he)throw new Error(We);Ge(s,C,g+6);const p=!!s.bitFlag.languageEncodingFlag,i=g+46,o=i+s.filenameLength,h=o+s.extraFieldLength,w=it(C,g+4),A=(0&w)==0;Object.assign(s,{versionMadeBy:w,msDosCompatible:A,compressedSize:0,uncompressedSize:0,commentLength:it(C,g+32),directory:A&&(16&gt(C,g+38))==16,offset:J(C,g+42)+x,internalFileAttribute:J(C,g+34),externalFileAttribute:J(C,g+38),rawFilename:S.subarray(i,o),filenameUTF8:p,commentUTF8:p,rawExtraField:S.subarray(o,h)});const v=h+s.commentLength;s.rawComment=S.subarray(h,v);const y=wt(e,n,"filenameEncoding"),f=wt(e,n,"commentEncoding"),[k,z]=await Promise.all([Vt(s.rawFilename,s.filenameUTF8?qe:y||Ve),Vt(s.rawComment,s.commentUTF8?qe:f||Ve)]);s.filename=k,s.comment=z,!s.directory&&s.filename.endsWith("/")&&(s.directory=!0),await Ke(s,s,C,g+6);const U=new De(s);if(U.getData=(T,R)=>s.getData(T,U,R),P.push(U),g=v,n.onprogress)try{n.onprogress(N+1,_,new De(s))}catch{}}return P}async close(){}},l.configure=Xt,l.getMimeType=function(){return"application/octet-stream"},Object.defineProperty(l,"__esModule",{value:!0})})})(Wn,Ct);const Pn=Nn(Ct);function Bn(){return{traceUrl:"",startTime:Number.MAX_SAFE_INTEGER,endTime:0,browserName:"",options:{deviceScaleFactor:1,isMobile:!1,viewport:{width:1280,height:800}},pages:[],resources:[],actions:[],events:[],initializers:{},hasSource:!1}}class Hn{constructor(){Y(this,"_resources",[]);Y(this,"_frameSnapshots",new Map)}addResource(c){c.request.url=Kt(c.request.url),this._resources.push(c)}addFrameSnapshot(c){for(const b of c.resourceOverrides)b.url=Kt(b.url);let l=this._frameSnapshots.get(c.frameId);l||(l={raw:[],renderers:[]},this._frameSnapshots.set(c.frameId,l),c.isMainFrame&&this._frameSnapshots.set(c.pageId,l)),l.raw.push(c);const m=new Rn(this._resources,l.raw,l.raw.length-1);return l.renderers.push(m),m}snapshotByName(c,l){const m=this._frameSnapshots.get(c);return m==null?void 0:m.renderers.find(b=>b.snapshotName===l)}}const Ut=Pn,jn=(E,c)=>{const l=new Array(c.length).fill(0);return new Array(c.length).fill(0).map((m,b)=>(I,j)=>{l[b]=I/j*c[b]*1e3,E(l.reduce((L,M)=>L+M,0),1e3)})};class qn{constructor(){Y(this,"contextEntries",[]);Y(this,"pageEntries",new Map);Y(this,"_snapshotStorage");Y(this,"_version");Y(this,"_backend")}async load(c,l){const m=c.endsWith("json"),[b,I]=jn(l,[.5,.4,.1]);this._backend=m?new $n(c):new Vn(c,b);const j=[];let L=!1;for(const D of await this._backend.entryNames()){const q=D.match(/(.+)\.trace/);q&&j.push(q[1]||""),D.includes("src@")&&(L=!0)}if(!j.length)throw new Error("Cannot find .trace file");this._snapshotStorage=new Hn;const M=j.length*3;let B=0;for(const D of j){const q=Bn(),K=new Map;q.traceUrl=c,q.hasSource=L;const Q=await this._backend.readText(D+".trace")||"";for(const tt of Q.split(`
`))this.appendEvent(q,K,tt);I(++B,M);const st=await this._backend.readText(D+".network")||"";for(const tt of st.split(`
`))this.appendEvent(q,K,tt);if(I(++B,M),q.actions=[...K.values()].sort((tt,ft)=>tt.startTime-ft.startTime),!m)for(const tt of q.actions)!tt.endTime&&!tt.error&&(tt.error={name:"Error",message:"Timed out"});const St=await this._backend.readText(D+".stacks");if(St){const tt=Ln(JSON.parse(St));for(const ft of q.actions)ft.stack=ft.stack||tt.get(ft.callId)}I(++B,M),this.contextEntries.push(q)}}async hasEntry(c){return this._backend.hasEntry(c)}async resourceForSha1(c){return this._backend.readBlob("resources/"+c)}storage(){return this._snapshotStorage}_pageEntry(c,l){let m=this.pageEntries.get(l);return m||(m={screencastFrames:[]},this.pageEntries.set(l,m),c.pages.push(m)),m}appendEvent(c,l,m){if(!m)return;const b=this._modernize(JSON.parse(m));if(b){switch(b.type){case"context-options":{this._version=b.version,c.browserName=b.browserName,c.title=b.title,c.platform=b.platform,c.wallTime=b.wallTime,c.sdkLanguage=b.sdkLanguage,c.options=b.options,c.testIdAttributeName=b.testIdAttributeName;break}case"screencast-frame":{this._pageEntry(c,b.pageId).screencastFrames.push(b);break}case"before":{l.set(b.callId,{...b,type:"action",endTime:0,log:[]});break}case"input":{const I=l.get(b.callId);I.inputSnapshot=b.inputSnapshot,I.point=b.point;break}case"after":{const I=l.get(b.callId);I.afterSnapshot=b.afterSnapshot,I.endTime=b.endTime,I.log=b.log,I.result=b.result,I.error=b.error;break}case"action":{l.set(b.callId,b);break}case"event":{c.events.push(b);break}case"object":{c.initializers[b.guid]=b.initializer;break}case"resource-snapshot":this._snapshotStorage.addResource(b.snapshot),c.resources.push(b.snapshot);break;case"frame-snapshot":this._snapshotStorage.addFrameSnapshot(b.snapshot);break}(b.type==="action"||b.type==="before")&&(c.startTime=Math.min(c.startTime,b.startTime)),(b.type==="action"||b.type==="after")&&(c.endTime=Math.max(c.endTime,b.endTime)),b.type==="event"&&(c.startTime=Math.min(c.startTime,b.time),c.endTime=Math.max(c.endTime,b.time)),b.type==="screencast-frame"&&(c.startTime=Math.min(c.startTime,b.timestamp),c.endTime=Math.max(c.endTime,b.timestamp))}}_modernize(c){if(this._version===void 0)return c;const l=4;for(let m=this._version;m<l;++m)c=this[`_modernize_${m}_to_${m+1}`].call(this,c);return c}_modernize_0_to_1(c){return c.type==="action"&&typeof c.metadata.error=="string"&&(c.metadata.error={error:{name:"Error",message:c.metadata.error}}),c}_modernize_1_to_2(c){var l,m;return c.type==="frame-snapshot"&&c.snapshot.isMainFrame&&(c.snapshot.viewport=((m=(l=this.contextEntries[0])==null?void 0:l.options)==null?void 0:m.viewport)||{width:1280,height:720}),c}_modernize_2_to_3(c){if(c.type==="resource-snapshot"&&!c.snapshot.request){const l=c.snapshot;c.snapshot={_frameref:l.frameId,request:{url:l.url,method:l.method,headers:l.requestHeaders,postData:l.requestSha1?{_sha1:l.requestSha1}:void 0},response:{status:l.status,headers:l.responseHeaders,content:{mimeType:l.contentType,_sha1:l.responseSha1}},_monotonicTime:l.timestamp}}return c}_modernize_3_to_4(c){var m,b,I,j;if(c.type!=="action"&&c.type!=="event")return c;const l=c.metadata;return l.internal||l.method.startsWith("tracing")?null:c.type==="event"?l.method==="__create__"&&l.type==="ConsoleMessage"?{type:"object",class:l.type,guid:l.params.guid,initializer:l.params.initializer}:{type:"event",time:l.startTime,class:l.type,method:l.method,params:l.params,pageId:l.pageId}:{type:"action",callId:l.id,startTime:l.startTime,endTime:l.endTime,apiName:l.apiName||l.type+"."+l.method,class:l.type,method:l.method,params:l.params,wallTime:l.wallTime||Date.now(),log:l.log,beforeSnapshot:(m=l.snapshots.find(L=>L.title==="before"))==null?void 0:m.snapshotName,inputSnapshot:(b=l.snapshots.find(L=>L.title==="input"))==null?void 0:b.snapshotName,afterSnapshot:(I=l.snapshots.find(L=>L.title==="after"))==null?void 0:I.snapshotName,error:(j=l.error)==null?void 0:j.error,result:l.result,point:l.point,pageId:l.pageId}}}class Vn{constructor(c,l){Y(this,"_zipReader");Y(this,"_entriesPromise");this._zipReader=new Ut.ZipReader(new Ut.HttpReader(Gn(c),{mode:"cors",preventHeadRequest:!0}),{useWebWorkers:!1}),this._entriesPromise=this._zipReader.getEntries({onprogress:l}).then(m=>{const b=new Map;for(const I of m)b.set(I.filename,I);return b})}async entryNames(){return[...(await this._entriesPromise).keys()]}async hasEntry(c){return(await this._entriesPromise).has(c)}async readText(c){var I;const m=(await this._entriesPromise).get(c);if(!m)return;const b=new Ut.TextWriter;return await((I=m.getData)==null?void 0:I.call(m,b)),b.getData()}async readBlob(c){const m=(await this._entriesPromise).get(c);if(!m)return;const b=new Ut.BlobWriter;return await m.getData(b),b.getData()}}class $n{constructor(c){Y(this,"_entriesPromise");this._entriesPromise=fetch("/trace/file?path="+encodeURI(c)).then(async l=>{const m=JSON.parse(await l.text()),b=new Map;for(const I of m.entries)b.set(I.name,I.path);return b})}async entryNames(){return[...(await this._entriesPromise).keys()]}async hasEntry(c){return(await this._entriesPromise).has(c)}async readText(c){const l=await this._readEntry(c);return l==null?void 0:l.text()}async readBlob(c){const l=await this._readEntry(c);return l==null?void 0:l.blob()}async _readEntry(c){const m=(await this._entriesPromise).get(c);if(m)return fetch("/trace/file?path="+encodeURI(m))}}function Gn(E){let c=E.startsWith("http")||E.startsWith("blob")?E:`file?path=${E}`;return c.startsWith("https://www.dropbox.com/")&&(c="https://dl.dropboxusercontent.com/"+c.substring(24)),c}self.addEventListener("install",function(E){self.skipWaiting()});self.addEventListener("activate",function(E){E.waitUntil(self.clients.claim())});const Kn=new URL(self.registration.scope).pathname,bt=new Map,Yt=new An;async function Zn(E,c,l,m){var j;Yt.set(l,E);const b=new qn;try{await b.load(E,m)}catch(L){throw(j=L==null?void 0:L.message)!=null&&j.includes("Cannot find .trace file")&&await b.hasEntry("index.html")?new Error("Could not load trace. Did you upload a Playwright HTML report instead? Make sure to extract the archive first and then double-click the index.html file or put it on a web server."):(console.error(L),c?new Error(`Could not load trace from ${c}. Make sure to upload a valid Playwright trace.`):new Error(`Could not load trace from ${E}. Make sure a valid Playwright Trace is accessible over this url.`))}const I=new Mn(b.storage(),L=>b.resourceForSha1(L));return bt.set(E,{traceModel:b,snapshotServer:I}),b}async function Yn(E){const c=E.request,l=await self.clients.get(E.clientId),m=self.registration.scope.startsWith("https://");if(c.url.startsWith(self.registration.scope)){const M=new URL(Zt(c.url)),B=M.pathname.substring(Kn.length-1);if(B==="/ping")return await Jn(),new Response(null,{status:200});const D=M.searchParams.get("trace"),{snapshotServer:q}=bt.get(D)||{};if(B==="/contexts")try{const K=await Zn(D,M.searchParams.get("traceFileName"),E.clientId,(Q,st)=>{l.postMessage({method:"progress",params:{done:Q,total:st}})});return new Response(JSON.stringify(K.contextEntries),{status:200,headers:{"Content-Type":"application/json"}})}catch(K){return new Response(JSON.stringify({error:K==null?void 0:K.message}),{status:500,headers:{"Content-Type":"application/json"}})}if(B.startsWith("/snapshotInfo/"))return q?q.serveSnapshotInfo(B,M.searchParams):new Response(null,{status:404});if(B.startsWith("/snapshot/")){if(!q)return new Response(null,{status:404});const K=q.serveSnapshot(B,M.searchParams,M.href);return m&&K.headers.set("Content-Security-Policy","upgrade-insecure-requests"),K}if(B.startsWith("/sha1/")){for(const{traceModel:K}of bt.values()){const Q=await K.resourceForSha1(B.slice(6));if(Q)return new Response(Q,{status:200})}return new Response(null,{status:404})}return fetch(E.request)}const b=Zt(l.url),I=new URL(b).searchParams.get("trace"),{snapshotServer:j}=bt.get(I)||{};if(!j)return new Response(null,{status:404});const L=[c.url];return m&&c.url.startsWith("https://")&&L.push(c.url.replace(/^https/,"http")),j.serveResource(L,b)}async function Jn(){const E=await self.clients.matchAll(),c=new Set;for(const[l,m]of Yt)E.find(b=>b.id===l)?m.forEach(b=>c.add(b)):Yt.deleteAll(l);for(const l of bt.keys())c.has(l)||bt.delete(l)}self.addEventListener("fetch",function(E){E.respondWith(Yn(E))});
