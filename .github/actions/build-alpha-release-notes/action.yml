name: build-alpha-release-notes
description: build-alpha-release-notes
inputs:
  latest-tag:
    required: true
    description: The latest tag
  version:
    required: true
    description: The alpha version
runs:
  using: composite
  steps:
    - name: Generate alpha release notes
      shell: bash
      run: |
        mkdir -p releases
        
        {
          echo "# Mokapi alpha"
          echo
          echo "⚠️ Automatically generated alpha build."
          echo
          echo "- Base version: ${{ steps.version.outputs.latest_tag }}"
          echo "- Alpha version: ${{ steps.version.outputs.version }}"
          echo "- Commit: $(git rev-parse --short HEAD)"
          echo "- Built at: $(date -u +"%Y-%m-%d %H:%M:%S UTC")"
          echo
          echo "## Changes since ${{ steps.version.outputs.latest_tag }}"
          echo
          git log "${{ steps.version.outputs.latest_tag }}..HEAD" \
            --oneline \
            --no-merges \
            --committer='^(?!github-actions\[bot\]|dependabot\[bot\]).*$'
        } > docs/release.md
    - name: Upload UI artifact
      uses: actions/upload-artifact@v4
      with:
        name: release-notes
        path: docs/release.md
