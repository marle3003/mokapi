openapi: 3.0.1
info:
  title: Mokapi's Dashboard API
  version: v1
servers:
  - url: http://localhost:8090
paths:
  /api/info:
    get:
      summary: get information about mokapi's runtime
      operationId: info
      responses:
        "200":
          description: the information about mokapi's runtime
          content:
            application/json:
              schema:
                $ref: 'common.yml#/components/schemas/Info'
  /api/services:
    get:
      summary: list of all services
      operationId: services
      responses:
        "200":
          description: the list of services
          content:
            application/json:
              schema:
                type: array
                items:
                  anyOf:
                    - $ref: 'http.yml#/components/schemas/HttpInfo'
                    - $ref: 'kafka.yml#/components/schemas/KafkaInfo'
  /api/services/http/{name}:
    get:
      summary: Information about the http service
      operationId: serviceHttp
      parameters:
        - name: name
          in: path
          required: true
          schema:
            type: string
      responses:
        "200":
          description: http service
          content:
            application/json:
              schema:
                $ref: 'kafka.yml#/components/schemas/HttpInfo'
  /api/services/kafka/{name}:
    get:
      summary: Information about the kafka cluster
      operationId: serviceKafka
      parameters:
        - name: name
          in: path
          required: true
          schema:
            type: string
      responses:
        "200":
          description: name of kafka cluster
          content:
            application/json:
              schema:
                $ref: 'kafka.yml#/components/schemas/Kafka'
  /api/services/smtp/{name}:
    get:
      summary: Information about the smtp server
      operationId: serviceSmtp
      parameters:
        - name: name
          in: path
          required: true
          schema:
            type: string
      responses:
        "200":
          description: name of kafka cluster
          content:
            application/json:
              schema:
                $ref: 'smtp.yml#/components/schemas/SmtpInfo'
  /api/services/kafka/{name}/groups:
    get:
      summary: Information about the kafka cluster
      operationId: serviceKafka
      parameters:
        - name: name
          in: path
          required: true
          schema:
            type: string
      responses:
        "200":
          description: name of kafka cluster
          content:
            application/json:
              schema:
                $ref: 'kafka.yml#/components/schemas/Kafka'
  /api/events:
    get:
      summary: Information about the kafka cluster
      operationId: events
      parameters:
        - name: traits
          in: query
          required: false
          schema:
            type: object
            additionalProperties:
              type: string
      responses:
        "200":
          description: name of kafka cluster
          content:
            application/json:
              schema:
                $ref: 'common.yml#/components/schemas/Events'
  /api/events/{id}:
    get:
      summary: Information about the kafka cluster
      operationId: event
      parameters:
        - name: id
          in: path
          required: true
          schema:
            type: string
      responses:
        "200":
          description: name of kafka cluster
          content:
            application/json:
              schema:
                $ref: 'common.yml#/components/schemas/Event'
        "404":
          description: no event exists for specified id
  /api/metrics:
    get:
      summary: returns metrics
      operationId: metrics
      parameters:
        - in: query
          name: query
          schema:
            type: string
      responses:
        "200":
          description: a list of metrics
          content:
            application/json:
              schema:
                $ref: 'common.yml#/components/schemas/Metrics'